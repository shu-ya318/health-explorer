/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@algolia";
exports.ids = ["vendor-chunks/@algolia"];
exports.modules = {

/***/ "(ssr)/./node_modules/@algolia/cache-common/dist/cache-common.esm.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@algolia/cache-common/dist/cache-common.esm.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFallbackableCache: () => (/* binding */ createFallbackableCache),\n/* harmony export */   createNullCache: () => (/* binding */ createNullCache)\n/* harmony export */ });\n// @todo Add logger on options to debug when caches go wrong.\r\nfunction createFallbackableCache(options) {\r\n    const caches = [...options.caches];\r\n    const current = caches.shift(); // eslint-disable-line functional/immutable-data\r\n    if (current === undefined) {\r\n        return createNullCache();\r\n    }\r\n    return {\r\n        get(key, defaultValue, events = {\r\n            miss: () => Promise.resolve(),\r\n        }) {\r\n            return current.get(key, defaultValue, events).catch(() => {\r\n                return createFallbackableCache({ caches }).get(key, defaultValue, events);\r\n            });\r\n        },\r\n        set(key, value) {\r\n            return current.set(key, value).catch(() => {\r\n                return createFallbackableCache({ caches }).set(key, value);\r\n            });\r\n        },\r\n        delete(key) {\r\n            return current.delete(key).catch(() => {\r\n                return createFallbackableCache({ caches }).delete(key);\r\n            });\r\n        },\r\n        clear() {\r\n            return current.clear().catch(() => {\r\n                return createFallbackableCache({ caches }).clear();\r\n            });\r\n        },\r\n    };\r\n}\n\nfunction createNullCache() {\r\n    return {\r\n        get(_key, defaultValue, events = {\r\n            miss: () => Promise.resolve(),\r\n        }) {\r\n            const value = defaultValue();\r\n            return value\r\n                .then(result => Promise.all([result, events.miss(result)]))\r\n                .then(([result]) => result);\r\n        },\r\n        set(_key, value) {\r\n            return Promise.resolve(value);\r\n        },\r\n        delete(_key) {\r\n            return Promise.resolve();\r\n        },\r\n        clear() {\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2FjaGUtY29tbW9uL2Rpc3QvY2FjaGUtY29tbW9uLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFb0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGgtZXhwbG9yZXIvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2FjaGUtY29tbW9uL2Rpc3QvY2FjaGUtY29tbW9uLmVzbS5qcz8zYWM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0b2RvIEFkZCBsb2dnZXIgb24gb3B0aW9ucyB0byBkZWJ1ZyB3aGVuIGNhY2hlcyBnbyB3cm9uZy5cclxuZnVuY3Rpb24gY3JlYXRlRmFsbGJhY2thYmxlQ2FjaGUob3B0aW9ucykge1xyXG4gICAgY29uc3QgY2FjaGVzID0gWy4uLm9wdGlvbnMuY2FjaGVzXTtcclxuICAgIGNvbnN0IGN1cnJlbnQgPSBjYWNoZXMuc2hpZnQoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU51bGxDYWNoZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXQoa2V5LCBkZWZhdWx0VmFsdWUsIGV2ZW50cyA9IHtcclxuICAgICAgICAgICAgbWlzczogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXHJcbiAgICAgICAgfSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudC5nZXQoa2V5LCBkZWZhdWx0VmFsdWUsIGV2ZW50cykuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZhbGxiYWNrYWJsZUNhY2hlKHsgY2FjaGVzIH0pLmdldChrZXksIGRlZmF1bHRWYWx1ZSwgZXZlbnRzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudC5zZXQoa2V5LCB2YWx1ZSkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZhbGxiYWNrYWJsZUNhY2hlKHsgY2FjaGVzIH0pLnNldChrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWxldGUoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50LmRlbGV0ZShrZXkpLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVGYWxsYmFja2FibGVDYWNoZSh7IGNhY2hlcyB9KS5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbGVhcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQuY2xlYXIoKS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlRmFsbGJhY2thYmxlQ2FjaGUoeyBjYWNoZXMgfSkuY2xlYXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlTnVsbENhY2hlKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXQoX2tleSwgZGVmYXVsdFZhbHVlLCBldmVudHMgPSB7XHJcbiAgICAgICAgICAgIG1pc3M6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLFxyXG4gICAgICAgIH0pIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkZWZhdWx0VmFsdWUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gUHJvbWlzZS5hbGwoW3Jlc3VsdCwgZXZlbnRzLm1pc3MocmVzdWx0KV0pKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKFtyZXN1bHRdKSA9PiByZXN1bHQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KF9rZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZXRlKF9rZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXIoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxuXG5leHBvcnQgeyBjcmVhdGVGYWxsYmFja2FibGVDYWNoZSwgY3JlYXRlTnVsbENhY2hlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/cache-common/dist/cache-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInMemoryCache: () => (/* binding */ createInMemoryCache)\n/* harmony export */ });\nfunction createInMemoryCache(options = { serializable: true }) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let cache = {};\r\n    return {\r\n        get(key, defaultValue, events = {\r\n            miss: () => Promise.resolve(),\r\n        }) {\r\n            const keyAsString = JSON.stringify(key);\r\n            if (keyAsString in cache) {\r\n                return Promise.resolve(options.serializable ? JSON.parse(cache[keyAsString]) : cache[keyAsString]);\r\n            }\r\n            const promise = defaultValue();\r\n            const miss = (events && events.miss) || (() => Promise.resolve());\r\n            return promise.then((value) => miss(value)).then(() => promise);\r\n        },\r\n        set(key, value) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            cache[JSON.stringify(key)] = options.serializable ? JSON.stringify(value) : value;\r\n            return Promise.resolve(value);\r\n        },\r\n        delete(key) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            delete cache[JSON.stringify(key)];\r\n            return Promise.resolve();\r\n        },\r\n        clear() {\r\n            cache = {};\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2FjaGUtaW4tbWVtb3J5L2Rpc3QvY2FjaGUtaW4tbWVtb3J5LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEseUNBQXlDLG9CQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUUrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2hlYWx0aC1leHBsb3Jlci8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9jYWNoZS1pbi1tZW1vcnkvZGlzdC9jYWNoZS1pbi1tZW1vcnkuZXNtLmpzPzZmOWMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY3JlYXRlSW5NZW1vcnlDYWNoZShvcHRpb25zID0geyBzZXJpYWxpemFibGU6IHRydWUgfSkge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBsZXQgY2FjaGUgPSB7fTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0KGtleSwgZGVmYXVsdFZhbHVlLCBldmVudHMgPSB7XHJcbiAgICAgICAgICAgIG1pc3M6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLFxyXG4gICAgICAgIH0pIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5QXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoa2V5QXNTdHJpbmcgaW4gY2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob3B0aW9ucy5zZXJpYWxpemFibGUgPyBKU09OLnBhcnNlKGNhY2hlW2tleUFzU3RyaW5nXSkgOiBjYWNoZVtrZXlBc1N0cmluZ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBkZWZhdWx0VmFsdWUoKTtcclxuICAgICAgICAgICAgY29uc3QgbWlzcyA9IChldmVudHMgJiYgZXZlbnRzLm1pc3MpIHx8ICgoKSA9PiBQcm9taXNlLnJlc29sdmUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHZhbHVlKSA9PiBtaXNzKHZhbHVlKSkudGhlbigoKSA9PiBwcm9taXNlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgIGNhY2hlW0pTT04uc3RyaW5naWZ5KGtleSldID0gb3B0aW9ucy5zZXJpYWxpemFibGUgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWxldGUoa2V5KSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtKU09OLnN0cmluZ2lmeShrZXkpXTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXIoKSB7XHJcbiAgICAgICAgICAgIGNhY2hlID0ge307XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxuXG5leHBvcnQgeyBjcmVhdGVJbk1lbW9yeUNhY2hlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-analytics/dist/client-analytics.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@algolia/client-analytics/dist/client-analytics.esm.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addABTest: () => (/* binding */ addABTest),\n/* harmony export */   createAnalyticsClient: () => (/* binding */ createAnalyticsClient),\n/* harmony export */   deleteABTest: () => (/* binding */ deleteABTest),\n/* harmony export */   getABTest: () => (/* binding */ getABTest),\n/* harmony export */   getABTests: () => (/* binding */ getABTests),\n/* harmony export */   stopABTest: () => (/* binding */ stopABTest)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\n\n\n\nconst createAnalyticsClient = options => {\r\n    const region = options.region || 'us';\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.createAuth)(_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.AuthMode.WithinHeaders, options.appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_1__.createTransporter)({\r\n        hosts: [{ url: `analytics.${region}.algolia.com` }],\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/json' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const appId = options.appId;\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.addMethods)({ appId, transporter }, options.methods);\r\n};\n\nconst addABTest = (base) => {\r\n    return (abTest, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Post,\r\n            path: '2/abtests',\r\n            data: abTest,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst deleteABTest = (base) => {\r\n    return (abTestID, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.encode)('2/abtests/%s', abTestID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getABTest = (base) => {\r\n    return (abTestID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.encode)('2/abtests/%s', abTestID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getABTests = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Get,\r\n            path: '2/abtests',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst stopABTest = (base) => {\r\n    return (abTestID, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.encode)('2/abtests/%s/stop', abTestID),\r\n        }, requestOptions);\r\n    };\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LWFuYWx5dGljcy9kaXN0L2NsaWVudC1hbmFseXRpY3MuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFrRjtBQUN6QjtBQUNGOztBQUV2RDtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFVLENBQUMsNERBQVE7QUFDcEMsd0JBQXdCLHVFQUFpQjtBQUN6QyxrQkFBa0Isa0JBQWtCLE9BQU8sZUFBZTtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSxXQUFXLGtFQUFVLEdBQUcsb0JBQW9CO0FBQzVDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsU0FBUztBQUNUO0FBQ0E7O0FBRTZGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoLWV4cGxvcmVyLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL2NsaWVudC1hbmFseXRpY3MvZGlzdC9jbGllbnQtYW5hbHl0aWNzLmVzbS5qcz8yYzdkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUF1dGgsIEF1dGhNb2RlLCBhZGRNZXRob2RzLCBlbmNvZGUgfSBmcm9tICdAYWxnb2xpYS9jbGllbnQtY29tbW9uJztcbmltcG9ydCB7IGNyZWF0ZVRyYW5zcG9ydGVyIH0gZnJvbSAnQGFsZ29saWEvdHJhbnNwb3J0ZXInO1xuaW1wb3J0IHsgTWV0aG9kRW51bSB9IGZyb20gJ0BhbGdvbGlhL3JlcXVlc3Rlci1jb21tb24nO1xuXG5jb25zdCBjcmVhdGVBbmFseXRpY3NDbGllbnQgPSBvcHRpb25zID0+IHtcclxuICAgIGNvbnN0IHJlZ2lvbiA9IG9wdGlvbnMucmVnaW9uIHx8ICd1cyc7XHJcbiAgICBjb25zdCBhdXRoID0gY3JlYXRlQXV0aChBdXRoTW9kZS5XaXRoaW5IZWFkZXJzLCBvcHRpb25zLmFwcElkLCBvcHRpb25zLmFwaUtleSk7XHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKHtcclxuICAgICAgICBob3N0czogW3sgdXJsOiBgYW5hbHl0aWNzLiR7cmVnaW9ufS5hbGdvbGlhLmNvbWAgfV0sXHJcbiAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIC4uLmF1dGguaGVhZGVycygpLFxyXG4gICAgICAgICAgICAuLi57ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgICAgIC4uLmF1dGgucXVlcnlQYXJhbWV0ZXJzKCksXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGFwcElkID0gb3B0aW9ucy5hcHBJZDtcclxuICAgIHJldHVybiBhZGRNZXRob2RzKHsgYXBwSWQsIHRyYW5zcG9ydGVyIH0sIG9wdGlvbnMubWV0aG9kcyk7XHJcbn07XG5cbmNvbnN0IGFkZEFCVGVzdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGFiVGVzdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMi9hYnRlc3RzJyxcclxuICAgICAgICAgICAgZGF0YTogYWJUZXN0LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGRlbGV0ZUFCVGVzdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGFiVGVzdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkRlbGV0ZSxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcyL2FidGVzdHMvJXMnLCBhYlRlc3RJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0QUJUZXN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoYWJUZXN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMi9hYnRlc3RzLyVzJywgYWJUZXN0SUQpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldEFCVGVzdHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMi9hYnRlc3RzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzdG9wQUJUZXN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoYWJUZXN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcyL2FidGVzdHMvJXMvc3RvcCcsIGFiVGVzdElEKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5leHBvcnQgeyBhZGRBQlRlc3QsIGNyZWF0ZUFuYWx5dGljc0NsaWVudCwgZGVsZXRlQUJUZXN0LCBnZXRBQlRlc3QsIGdldEFCVGVzdHMsIHN0b3BBQlRlc3QgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-analytics/dist/client-analytics.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@algolia/client-common/dist/client-common.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthMode: () => (/* binding */ AuthMode),\n/* harmony export */   addMethods: () => (/* binding */ addMethods),\n/* harmony export */   createAuth: () => (/* binding */ createAuth),\n/* harmony export */   createRetryablePromise: () => (/* binding */ createRetryablePromise),\n/* harmony export */   createWaitablePromise: () => (/* binding */ createWaitablePromise),\n/* harmony export */   destroy: () => (/* binding */ destroy),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   shuffle: () => (/* binding */ shuffle),\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\nfunction createAuth(authMode, appId, apiKey) {\r\n    const credentials = {\r\n        'x-algolia-api-key': apiKey,\r\n        'x-algolia-application-id': appId,\r\n    };\r\n    return {\r\n        headers() {\r\n            return authMode === AuthMode.WithinHeaders ? credentials : {};\r\n        },\r\n        queryParameters() {\r\n            return authMode === AuthMode.WithinQueryParameters ? credentials : {};\r\n        },\r\n    };\r\n}\n\nfunction createRetryablePromise(callback) {\r\n    let retriesCount = 0; // eslint-disable-line functional/no-let\r\n    const retry = () => {\r\n        retriesCount++;\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                resolve(callback(retry));\r\n            }, Math.min(100 * retriesCount, 1000));\r\n        });\r\n    };\r\n    return callback(retry);\r\n}\n\nfunction createWaitablePromise(promise, wait = (_response, _requestOptions) => {\r\n    return Promise.resolve();\r\n}) {\r\n    // eslint-disable-next-line functional/immutable-data\r\n    return Object.assign(promise, {\r\n        wait(requestOptions) {\r\n            return createWaitablePromise(promise\r\n                .then(response => Promise.all([wait(response, requestOptions), response]))\r\n                .then(promiseResults => promiseResults[1]));\r\n        },\r\n    });\r\n}\n\n// eslint-disable-next-line functional/prefer-readonly-type\r\nfunction shuffle(array) {\r\n    let c = array.length - 1; // eslint-disable-line functional/no-let\r\n    // eslint-disable-next-line functional/no-loop-statement\r\n    for (c; c > 0; c--) {\r\n        const b = Math.floor(Math.random() * (c + 1));\r\n        const a = array[c];\r\n        array[c] = array[b]; // eslint-disable-line functional/immutable-data, no-param-reassign\r\n        array[b] = a; // eslint-disable-line functional/immutable-data, no-param-reassign\r\n    }\r\n    return array;\r\n}\r\nfunction addMethods(base, methods) {\r\n    if (!methods) {\r\n        return base;\r\n    }\r\n    Object.keys(methods).forEach(key => {\r\n        // eslint-disable-next-line functional/immutable-data, no-param-reassign\r\n        base[key] = methods[key](base);\r\n    });\r\n    return base;\r\n}\r\nfunction encode(format, ...args) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let i = 0;\r\n    return format.replace(/%s/g, () => encodeURIComponent(args[i++]));\r\n}\n\nconst version = '4.24.0';\n\nconst destroy = (base) => {\r\n    return () => {\r\n        return base.transporter.requester.destroy();\r\n    };\r\n};\n\nconst AuthMode = {\r\n    /**\r\n     * If auth credentials should be in query parameters.\r\n     */\r\n    WithinQueryParameters: 0,\r\n    /**\r\n     * If auth credentials should be in headers.\r\n     */\r\n    WithinHeaders: 1,\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LWNvbW1vbi9kaXN0L2NsaWVudC1jb21tb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4SCIsInNvdXJjZXMiOlsid2VicGFjazovL2hlYWx0aC1leHBsb3Jlci8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9jbGllbnQtY29tbW9uL2Rpc3QvY2xpZW50LWNvbW1vbi5lc20uanM/N2Y1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBjcmVhdGVBdXRoKGF1dGhNb2RlLCBhcHBJZCwgYXBpS2V5KSB7XHJcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IHtcclxuICAgICAgICAneC1hbGdvbGlhLWFwaS1rZXknOiBhcGlLZXksXHJcbiAgICAgICAgJ3gtYWxnb2xpYS1hcHBsaWNhdGlvbi1pZCc6IGFwcElkLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhNb2RlID09PSBBdXRoTW9kZS5XaXRoaW5IZWFkZXJzID8gY3JlZGVudGlhbHMgOiB7fTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhNb2RlID09PSBBdXRoTW9kZS5XaXRoaW5RdWVyeVBhcmFtZXRlcnMgPyBjcmVkZW50aWFscyA6IHt9O1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UoY2FsbGJhY2spIHtcclxuICAgIGxldCByZXRyaWVzQ291bnQgPSAwOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBjb25zdCByZXRyeSA9ICgpID0+IHtcclxuICAgICAgICByZXRyaWVzQ291bnQrKztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNhbGxiYWNrKHJldHJ5KSk7XHJcbiAgICAgICAgICAgIH0sIE1hdGgubWluKDEwMCAqIHJldHJpZXNDb3VudCwgMTAwMCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjYWxsYmFjayhyZXRyeSk7XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlV2FpdGFibGVQcm9taXNlKHByb21pc2UsIHdhaXQgPSAoX3Jlc3BvbnNlLCBfcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxufSkge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb21pc2UsIHtcclxuICAgICAgICB3YWl0KHJlcXVlc3RPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UocHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gUHJvbWlzZS5hbGwoW3dhaXQocmVzcG9uc2UsIHJlcXVlc3RPcHRpb25zKSwgcmVzcG9uc2VdKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHByb21pc2VSZXN1bHRzID0+IHByb21pc2VSZXN1bHRzWzFdKSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL3ByZWZlci1yZWFkb25seS10eXBlXHJcbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcclxuICAgIGxldCBjID0gYXJyYXkubGVuZ3RoIC0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL25vLWxldFxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgIGZvciAoYzsgYyA+IDA7IGMtLSkge1xyXG4gICAgICAgIGNvbnN0IGIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoYyArIDEpKTtcclxuICAgICAgICBjb25zdCBhID0gYXJyYXlbY107XHJcbiAgICAgICAgYXJyYXlbY10gPSBhcnJheVtiXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLCBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgIGFycmF5W2JdID0gYTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLCBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG59XHJcbmZ1bmN0aW9uIGFkZE1ldGhvZHMoYmFzZSwgbWV0aG9kcykge1xyXG4gICAgaWYgKCFtZXRob2RzKSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U7XHJcbiAgICB9XHJcbiAgICBPYmplY3Qua2V5cyhtZXRob2RzKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGEsIG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgYmFzZVtrZXldID0gbWV0aG9kc1trZXldKGJhc2UpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYmFzZTtcclxufVxyXG5mdW5jdGlvbiBlbmNvZGUoZm9ybWF0LCAuLi5hcmdzKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgIGxldCBpID0gMDtcclxuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvJXMvZywgKCkgPT4gZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3NbaSsrXSkpO1xyXG59XG5cbmNvbnN0IHZlcnNpb24gPSAnNC4yNC4wJztcblxuY29uc3QgZGVzdHJveSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlcXVlc3Rlci5kZXN0cm95KCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBBdXRoTW9kZSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogSWYgYXV0aCBjcmVkZW50aWFscyBzaG91bGQgYmUgaW4gcXVlcnkgcGFyYW1ldGVycy5cclxuICAgICAqL1xyXG4gICAgV2l0aGluUXVlcnlQYXJhbWV0ZXJzOiAwLFxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiBhdXRoIGNyZWRlbnRpYWxzIHNob3VsZCBiZSBpbiBoZWFkZXJzLlxyXG4gICAgICovXHJcbiAgICBXaXRoaW5IZWFkZXJzOiAxLFxyXG59O1xuXG5leHBvcnQgeyBBdXRoTW9kZSwgYWRkTWV0aG9kcywgY3JlYXRlQXV0aCwgY3JlYXRlUmV0cnlhYmxlUHJvbWlzZSwgY3JlYXRlV2FpdGFibGVQcm9taXNlLCBkZXN0cm95LCBlbmNvZGUsIHNodWZmbGUsIHZlcnNpb24gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-personalization/dist/client-personalization.esm.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@algolia/client-personalization/dist/client-personalization.esm.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPersonalizationClient: () => (/* binding */ createPersonalizationClient),\n/* harmony export */   getPersonalizationStrategy: () => (/* binding */ getPersonalizationStrategy),\n/* harmony export */   setPersonalizationStrategy: () => (/* binding */ setPersonalizationStrategy)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\n\n\n\nconst createPersonalizationClient = options => {\r\n    const region = options.region || 'us';\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.createAuth)(_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.AuthMode.WithinHeaders, options.appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_1__.createTransporter)({\r\n        hosts: [{ url: `personalization.${region}.algolia.com` }],\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/json' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.addMethods)({ appId: options.appId, transporter }, options.methods);\r\n};\n\nconst getPersonalizationStrategy = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Get,\r\n            path: '1/strategies/personalization',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setPersonalizationStrategy = (base) => {\r\n    return (personalizationStrategy, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Post,\r\n            path: '1/strategies/personalization',\r\n            data: personalizationStrategy,\r\n        }, requestOptions);\r\n    };\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXBlcnNvbmFsaXphdGlvbi9kaXN0L2NsaWVudC1wZXJzb25hbGl6YXRpb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwRTtBQUNqQjtBQUNGOztBQUV2RDtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFVLENBQUMsNERBQVE7QUFDcEMsd0JBQXdCLHVFQUFpQjtBQUN6QyxrQkFBa0Isd0JBQXdCLE9BQU8sZUFBZTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsV0FBVyxrRUFBVSxHQUFHLG1DQUFtQztBQUMzRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUUrRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hlYWx0aC1leHBsb3Jlci8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9jbGllbnQtcGVyc29uYWxpemF0aW9uL2Rpc3QvY2xpZW50LXBlcnNvbmFsaXphdGlvbi5lc20uanM/ZDdmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBdXRoLCBBdXRoTW9kZSwgYWRkTWV0aG9kcyB9IGZyb20gJ0BhbGdvbGlhL2NsaWVudC1jb21tb24nO1xuaW1wb3J0IHsgY3JlYXRlVHJhbnNwb3J0ZXIgfSBmcm9tICdAYWxnb2xpYS90cmFuc3BvcnRlcic7XG5pbXBvcnQgeyBNZXRob2RFbnVtIH0gZnJvbSAnQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbic7XG5cbmNvbnN0IGNyZWF0ZVBlcnNvbmFsaXphdGlvbkNsaWVudCA9IG9wdGlvbnMgPT4ge1xyXG4gICAgY29uc3QgcmVnaW9uID0gb3B0aW9ucy5yZWdpb24gfHwgJ3VzJztcclxuICAgIGNvbnN0IGF1dGggPSBjcmVhdGVBdXRoKEF1dGhNb2RlLldpdGhpbkhlYWRlcnMsIG9wdGlvbnMuYXBwSWQsIG9wdGlvbnMuYXBpS2V5KTtcclxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoe1xyXG4gICAgICAgIGhvc3RzOiBbeyB1cmw6IGBwZXJzb25hbGl6YXRpb24uJHtyZWdpb259LmFsZ29saWEuY29tYCB9XSxcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgLi4uYXV0aC5oZWFkZXJzKCksXHJcbiAgICAgICAgICAgIC4uLnsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBxdWVyeVBhcmFtZXRlcnM6IHtcclxuICAgICAgICAgICAgLi4uYXV0aC5xdWVyeVBhcmFtZXRlcnMoKSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGFkZE1ldGhvZHMoeyBhcHBJZDogb3B0aW9ucy5hcHBJZCwgdHJhbnNwb3J0ZXIgfSwgb3B0aW9ucy5tZXRob2RzKTtcclxufTtcblxuY29uc3QgZ2V0UGVyc29uYWxpemF0aW9uU3RyYXRlZ3kgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9zdHJhdGVnaWVzL3BlcnNvbmFsaXphdGlvbicsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2V0UGVyc29uYWxpemF0aW9uU3RyYXRlZ3kgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChwZXJzb25hbGl6YXRpb25TdHJhdGVneSwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9zdHJhdGVnaWVzL3BlcnNvbmFsaXphdGlvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IHBlcnNvbmFsaXphdGlvblN0cmF0ZWd5LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZVBlcnNvbmFsaXphdGlvbkNsaWVudCwgZ2V0UGVyc29uYWxpemF0aW9uU3RyYXRlZ3ksIHNldFBlcnNvbmFsaXphdGlvblN0cmF0ZWd5IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-personalization/dist/client-personalization.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-search/dist/client-search.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@algolia/client-search/dist/client-search.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiKeyACLEnum: () => (/* binding */ ApiKeyACLEnum),\n/* harmony export */   BatchActionEnum: () => (/* binding */ BatchActionEnum),\n/* harmony export */   ScopeEnum: () => (/* binding */ ScopeEnum),\n/* harmony export */   StrategyEnum: () => (/* binding */ StrategyEnum),\n/* harmony export */   SynonymEnum: () => (/* binding */ SynonymEnum),\n/* harmony export */   addApiKey: () => (/* binding */ addApiKey),\n/* harmony export */   assignUserID: () => (/* binding */ assignUserID),\n/* harmony export */   assignUserIDs: () => (/* binding */ assignUserIDs),\n/* harmony export */   batch: () => (/* binding */ batch),\n/* harmony export */   browseObjects: () => (/* binding */ browseObjects),\n/* harmony export */   browseRules: () => (/* binding */ browseRules),\n/* harmony export */   browseSynonyms: () => (/* binding */ browseSynonyms),\n/* harmony export */   chunkedBatch: () => (/* binding */ chunkedBatch),\n/* harmony export */   clearDictionaryEntries: () => (/* binding */ clearDictionaryEntries),\n/* harmony export */   clearObjects: () => (/* binding */ clearObjects),\n/* harmony export */   clearRules: () => (/* binding */ clearRules),\n/* harmony export */   clearSynonyms: () => (/* binding */ clearSynonyms),\n/* harmony export */   copyIndex: () => (/* binding */ copyIndex),\n/* harmony export */   copyRules: () => (/* binding */ copyRules),\n/* harmony export */   copySettings: () => (/* binding */ copySettings),\n/* harmony export */   copySynonyms: () => (/* binding */ copySynonyms),\n/* harmony export */   createBrowsablePromise: () => (/* binding */ createBrowsablePromise),\n/* harmony export */   createMissingObjectIDError: () => (/* binding */ createMissingObjectIDError),\n/* harmony export */   createObjectNotFoundError: () => (/* binding */ createObjectNotFoundError),\n/* harmony export */   createSearchClient: () => (/* binding */ createSearchClient),\n/* harmony export */   createValidUntilNotFoundError: () => (/* binding */ createValidUntilNotFoundError),\n/* harmony export */   customRequest: () => (/* binding */ customRequest),\n/* harmony export */   deleteApiKey: () => (/* binding */ deleteApiKey),\n/* harmony export */   deleteBy: () => (/* binding */ deleteBy),\n/* harmony export */   deleteDictionaryEntries: () => (/* binding */ deleteDictionaryEntries),\n/* harmony export */   deleteIndex: () => (/* binding */ deleteIndex),\n/* harmony export */   deleteObject: () => (/* binding */ deleteObject),\n/* harmony export */   deleteObjects: () => (/* binding */ deleteObjects),\n/* harmony export */   deleteRule: () => (/* binding */ deleteRule),\n/* harmony export */   deleteSynonym: () => (/* binding */ deleteSynonym),\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   findAnswers: () => (/* binding */ findAnswers),\n/* harmony export */   findObject: () => (/* binding */ findObject),\n/* harmony export */   generateSecuredApiKey: () => (/* binding */ generateSecuredApiKey),\n/* harmony export */   getApiKey: () => (/* binding */ getApiKey),\n/* harmony export */   getAppTask: () => (/* binding */ getAppTask),\n/* harmony export */   getDictionarySettings: () => (/* binding */ getDictionarySettings),\n/* harmony export */   getLogs: () => (/* binding */ getLogs),\n/* harmony export */   getObject: () => (/* binding */ getObject),\n/* harmony export */   getObjectPosition: () => (/* binding */ getObjectPosition),\n/* harmony export */   getObjects: () => (/* binding */ getObjects),\n/* harmony export */   getRule: () => (/* binding */ getRule),\n/* harmony export */   getSecuredApiKeyRemainingValidity: () => (/* binding */ getSecuredApiKeyRemainingValidity),\n/* harmony export */   getSettings: () => (/* binding */ getSettings),\n/* harmony export */   getSynonym: () => (/* binding */ getSynonym),\n/* harmony export */   getTask: () => (/* binding */ getTask),\n/* harmony export */   getTopUserIDs: () => (/* binding */ getTopUserIDs),\n/* harmony export */   getUserID: () => (/* binding */ getUserID),\n/* harmony export */   hasPendingMappings: () => (/* binding */ hasPendingMappings),\n/* harmony export */   initIndex: () => (/* binding */ initIndex),\n/* harmony export */   listApiKeys: () => (/* binding */ listApiKeys),\n/* harmony export */   listClusters: () => (/* binding */ listClusters),\n/* harmony export */   listIndices: () => (/* binding */ listIndices),\n/* harmony export */   listUserIDs: () => (/* binding */ listUserIDs),\n/* harmony export */   moveIndex: () => (/* binding */ moveIndex),\n/* harmony export */   multipleBatch: () => (/* binding */ multipleBatch),\n/* harmony export */   multipleGetObjects: () => (/* binding */ multipleGetObjects),\n/* harmony export */   multipleQueries: () => (/* binding */ multipleQueries),\n/* harmony export */   multipleSearchForFacetValues: () => (/* binding */ multipleSearchForFacetValues),\n/* harmony export */   partialUpdateObject: () => (/* binding */ partialUpdateObject),\n/* harmony export */   partialUpdateObjects: () => (/* binding */ partialUpdateObjects),\n/* harmony export */   removeUserID: () => (/* binding */ removeUserID),\n/* harmony export */   replaceAllObjects: () => (/* binding */ replaceAllObjects),\n/* harmony export */   replaceAllRules: () => (/* binding */ replaceAllRules),\n/* harmony export */   replaceAllSynonyms: () => (/* binding */ replaceAllSynonyms),\n/* harmony export */   replaceDictionaryEntries: () => (/* binding */ replaceDictionaryEntries),\n/* harmony export */   restoreApiKey: () => (/* binding */ restoreApiKey),\n/* harmony export */   saveDictionaryEntries: () => (/* binding */ saveDictionaryEntries),\n/* harmony export */   saveObject: () => (/* binding */ saveObject),\n/* harmony export */   saveObjects: () => (/* binding */ saveObjects),\n/* harmony export */   saveRule: () => (/* binding */ saveRule),\n/* harmony export */   saveRules: () => (/* binding */ saveRules),\n/* harmony export */   saveSynonym: () => (/* binding */ saveSynonym),\n/* harmony export */   saveSynonyms: () => (/* binding */ saveSynonyms),\n/* harmony export */   search: () => (/* binding */ search),\n/* harmony export */   searchDictionaryEntries: () => (/* binding */ searchDictionaryEntries),\n/* harmony export */   searchForFacetValues: () => (/* binding */ searchForFacetValues),\n/* harmony export */   searchRules: () => (/* binding */ searchRules),\n/* harmony export */   searchSynonyms: () => (/* binding */ searchSynonyms),\n/* harmony export */   searchUserIDs: () => (/* binding */ searchUserIDs),\n/* harmony export */   setDictionarySettings: () => (/* binding */ setDictionarySettings),\n/* harmony export */   setSettings: () => (/* binding */ setSettings),\n/* harmony export */   updateApiKey: () => (/* binding */ updateApiKey),\n/* harmony export */   waitAppTask: () => (/* binding */ waitAppTask),\n/* harmony export */   waitTask: () => (/* binding */ waitTask)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n\n\n\n\nfunction createBrowsablePromise(options) {\r\n    const browse = (data) => {\r\n        return options.request(data).then(response => {\r\n            /**\r\n             * First we send to the developer the\r\n             * batch retrieved from the API.\r\n             */\r\n            if (options.batch !== undefined) {\r\n                options.batch(response.hits);\r\n            }\r\n            /**\r\n             * Then, we ask to the browse concrete implementation\r\n             * if we should stop browsing. As example, the `browseObjects`\r\n             * method will stop if the cursor is not present on the response.\r\n             */\r\n            if (options.shouldStop(response)) {\r\n                return undefined;\r\n            }\r\n            /**\r\n             * Finally, if the response contains a cursor, we browse to the next\r\n             * batch using that same cursor. Otherwise, we just use the traditional\r\n             * browsing using the page element.\r\n             */\r\n            if (response.cursor) {\r\n                return browse({\r\n                    cursor: response.cursor,\r\n                });\r\n            }\r\n            return browse({\r\n                page: (data.page || 0) + 1,\r\n            });\r\n        });\r\n    };\r\n    return browse({});\r\n}\n\nconst createSearchClient = options => {\r\n    const appId = options.appId;\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createAuth)(options.authMode !== undefined ? options.authMode : _algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.AuthMode.WithinHeaders, appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createTransporter)({\r\n        hosts: [\r\n            { url: `${appId}-dsn.algolia.net`, accept: _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.CallEnum.Read },\r\n            { url: `${appId}.algolia.net`, accept: _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.CallEnum.Write },\r\n        ].concat((0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.shuffle)([\r\n            { url: `${appId}-1.algolianet.com` },\r\n            { url: `${appId}-2.algolianet.com` },\r\n            { url: `${appId}-3.algolianet.com` },\r\n        ])),\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/x-www-form-urlencoded' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const base = {\r\n        transporter,\r\n        appId,\r\n        addAlgoliaAgent(segment, version) {\r\n            transporter.userAgent.add({ segment, version });\r\n        },\r\n        clearCache() {\r\n            return Promise.all([\r\n                transporter.requestsCache.clear(),\r\n                transporter.responsesCache.clear(),\r\n            ]).then(() => undefined);\r\n        },\r\n    };\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.addMethods)(base, options.methods);\r\n};\n\nfunction createMissingObjectIDError() {\r\n    return {\r\n        name: 'MissingObjectIDError',\r\n        message: 'All objects must have an unique objectID ' +\r\n            '(like a primary key) to be valid. ' +\r\n            'Algolia is also able to generate objectIDs ' +\r\n            \"automatically but *it's not recommended*. \" +\r\n            \"To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option.\",\r\n    };\r\n}\n\nfunction createObjectNotFoundError() {\r\n    return {\r\n        name: 'ObjectNotFoundError',\r\n        message: 'Object not found.',\r\n    };\r\n}\n\nfunction createValidUntilNotFoundError() {\r\n    return {\r\n        name: 'ValidUntilNotFoundError',\r\n        message: 'ValidUntil not found in given secured api key.',\r\n    };\r\n}\n\nconst addApiKey = (base) => {\r\n    return (acl, requestOptions) => {\r\n        const { queryParameters, ...options } = requestOptions || {};\r\n        const data = {\r\n            acl,\r\n            ...(queryParameters !== undefined ? { queryParameters } : {}),\r\n        };\r\n        const wait = (response, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(response.key, waitRequestOptions).catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                    return retry();\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/keys',\r\n            data,\r\n        }, options), wait);\r\n    };\r\n};\n\nconst assignUserID = (base) => {\r\n    return (userID, clusterName, requestOptions) => {\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(requestOptions);\r\n        // eslint-disable-next-line functional/immutable-data\r\n        mappedRequestOptions.queryParameters['X-Algolia-User-ID'] = userID;\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping',\r\n            data: { cluster: clusterName },\r\n        }, mappedRequestOptions);\r\n    };\r\n};\n\nconst assignUserIDs = (base) => {\r\n    return (userIDs, clusterName, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping/batch',\r\n            data: {\r\n                users: userIDs,\r\n                cluster: clusterName,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst clearDictionaryEntries = (base) => {\r\n    return (dictionary, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: {\r\n                clearExistingDictionaryEntries: true,\r\n                requests: { action: 'addEntry', body: [] },\r\n            },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst copyIndex = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return initIndex(base)(from, {\r\n                methods: { waitTask },\r\n            }).waitTask(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n            data: {\r\n                operation: 'copy',\r\n                destination: to,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst copyRules = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Rules],\r\n        });\r\n    };\r\n};\n\nconst copySettings = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Settings],\r\n        });\r\n    };\r\n};\n\nconst copySynonyms = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Synonyms],\r\n        });\r\n    };\r\n};\n\nconst customRequest = (base) => {\r\n    return (request, requestOptions) => {\r\n        if (request.method === _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get) {\r\n            return base.transporter.read(request, requestOptions);\r\n        }\r\n        return base.transporter.write(request, requestOptions);\r\n    };\r\n};\n\nconst deleteApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const wait = (_, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(apiKey, waitRequestOptions)\r\n                    .then(retry)\r\n                    .catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst deleteDictionaryEntries = (base) => {\r\n    return (dictionary, objectIDs, requestOptions) => {\r\n        const requests = objectIDs.map(objectID => ({\r\n            action: 'deleteEntry',\r\n            body: { objectID },\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: false, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst generateSecuredApiKey = () => {\r\n    return (parentApiKey, restrictions) => {\r\n        const queryParameters = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.serializeQueryParameters)(restrictions);\r\n        const securedKey = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createHmac)('sha256', parentApiKey)\r\n            .update(queryParameters)\r\n            .digest('hex');\r\n        return Buffer.from(securedKey + queryParameters).toString('base64');\r\n    };\r\n};\n\nconst getApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getAppTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/task/%s', taskID.toString()),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getDictionarySettings = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '/1/dictionaries/*/settings',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getLogs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/logs',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSecuredApiKeyRemainingValidity = () => {\r\n    return (securedApiKey) => {\r\n        const decodedString = Buffer.from(securedApiKey, 'base64').toString('ascii');\r\n        const regex = /validUntil=(\\d+)/;\r\n        const match = decodedString.match(regex);\r\n        if (match === null) {\r\n            throw createValidUntilNotFoundError();\r\n        }\r\n        return parseInt(match[1], 10) - Math.round(new Date().getTime() / 1000);\r\n    };\r\n};\n\nconst getTopUserIDs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping/top',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getUserID = (base) => {\r\n    return (userID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/clusters/mapping/%s', userID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst hasPendingMappings = (base) => {\r\n    return (requestOptions) => {\r\n        const { retrieveMappings, ...options } = requestOptions || {};\r\n        if (retrieveMappings === true) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            options.getClusters = true;\r\n        }\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping/pending',\r\n        }, options);\r\n    };\r\n};\n\nconst initIndex = (base) => {\r\n    return (indexName, options = {}) => {\r\n        const searchIndex = {\r\n            transporter: base.transporter,\r\n            appId: base.appId,\r\n            indexName,\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.addMethods)(searchIndex, options.methods);\r\n    };\r\n};\n\nconst listApiKeys = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/keys',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listClusters = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listIndices = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/indexes',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listUserIDs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst moveIndex = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return initIndex(base)(from, {\r\n                methods: { waitTask },\r\n            }).waitTask(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n            data: {\r\n                operation: 'move',\r\n                destination: to,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst multipleBatch = (base) => {\r\n    return (requests, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return Promise.all(Object.keys(response.taskID).map(indexName => {\r\n                return initIndex(base)(indexName, {\r\n                    methods: { waitTask },\r\n                }).waitTask(response.taskID[indexName], waitRequestOptions);\r\n            }));\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/batch',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst multipleGetObjects = (base) => {\r\n    return (requests, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/objects',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst multipleQueries = (base) => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => {\r\n            return {\r\n                ...query,\r\n                params: (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.serializeQueryParameters)(query.params || {}),\r\n            };\r\n        });\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/queries',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst multipleSearchForFacetValues = (base) => {\r\n    return (queries, requestOptions) => {\r\n        return Promise.all(queries.map(query => {\r\n            const { facetName, facetQuery, ...params } = query.params;\r\n            return initIndex(base)(query.indexName, {\r\n                methods: { searchForFacetValues },\r\n            }).searchForFacetValues(facetName, facetQuery, {\r\n                ...requestOptions,\r\n                ...params,\r\n            });\r\n        }));\r\n    };\r\n};\n\nconst removeUserID = (base) => {\r\n    return (userID, requestOptions) => {\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(requestOptions);\r\n        // eslint-disable-next-line functional/immutable-data\r\n        mappedRequestOptions.queryParameters['X-Algolia-User-ID'] = userID;\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: '1/clusters/mapping',\r\n        }, mappedRequestOptions);\r\n    };\r\n};\n\nconst replaceDictionaryEntries = (base) => {\r\n    return (dictionary, entries, requestOptions) => {\r\n        const requests = entries.map(entry => ({\r\n            action: 'addEntry',\r\n            body: entry,\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: true, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst restoreApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const wait = (_, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(apiKey, waitRequestOptions).catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                    return retry();\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s/restore', apiKey),\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst saveDictionaryEntries = (base) => {\r\n    return (dictionary, entries, requestOptions) => {\r\n        const requests = entries.map(entry => ({\r\n            action: 'addEntry',\r\n            body: entry,\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: false, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst searchDictionaryEntries = (base) => {\r\n    return (dictionary, query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/search', dictionary),\r\n            data: {\r\n                query,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchUserIDs = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping/search',\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setDictionarySettings = (base) => {\r\n    return (settings, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: '/1/dictionaries/*/settings',\r\n            data: settings,\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst updateApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const updatedFields = Object.assign({}, requestOptions);\r\n        const { queryParameters, ...options } = requestOptions || {};\r\n        const data = queryParameters ? { queryParameters } : {};\r\n        const apiKeyFields = [\r\n            'acl',\r\n            'indexes',\r\n            'referers',\r\n            'restrictSources',\r\n            'queryParameters',\r\n            'description',\r\n            'maxQueriesPerIPPerHour',\r\n            'maxHitsPerQuery',\r\n        ];\r\n        // Check that all the fields retrieved through getApiKey are the same as the ones we wanted to update\r\n        const hasChanged = (getApiKeyResponse) => {\r\n            return Object.keys(updatedFields)\r\n                .filter((updatedField) => apiKeyFields.indexOf(updatedField) !== -1)\r\n                .every(updatedField => {\r\n                // If the field is an array, we need to check that they are the same length and that all the values are the same\r\n                if (Array.isArray(getApiKeyResponse[updatedField]) &&\r\n                    Array.isArray(updatedFields[updatedField])) {\r\n                    const getApiKeyResponseArray = getApiKeyResponse[updatedField];\r\n                    return (getApiKeyResponseArray.length === updatedFields[updatedField].length &&\r\n                        getApiKeyResponseArray.every((value, index) => value === updatedFields[updatedField][index]));\r\n                }\r\n                else {\r\n                    return getApiKeyResponse[updatedField] === updatedFields[updatedField];\r\n                }\r\n            });\r\n        };\r\n        const wait = (_, waitRequestOptions) => (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getApiKey(base)(apiKey, waitRequestOptions).then(getApiKeyResponse => {\r\n                return hasChanged(getApiKeyResponse) ? Promise.resolve() : retry();\r\n            });\r\n        });\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n            data,\r\n        }, options), wait);\r\n    };\r\n};\n\nconst waitAppTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getAppTask(base)(taskID, requestOptions).then(response => {\r\n                return response.status !== 'published' ? retry() : undefined;\r\n            });\r\n        });\r\n    };\r\n};\n\nconst batch = (base) => {\r\n    return (requests, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return waitTask(base)(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/batch', base.indexName),\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst browseObjects = (base) => {\r\n    return (requestOptions) => {\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.cursor === undefined,\r\n            ...requestOptions,\r\n            request: (data) => base.transporter.read({\r\n                method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n                path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/browse', base.indexName),\r\n                data,\r\n            }, requestOptions),\r\n        });\r\n    };\r\n};\n\nconst browseRules = (base) => {\r\n    return (requestOptions) => {\r\n        const options = {\r\n            hitsPerPage: 1000,\r\n            ...requestOptions,\r\n        };\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.hits.length < options.hitsPerPage,\r\n            ...options,\r\n            request(data) {\r\n                return searchRules(base)('', { ...options, ...data }).then((response) => {\r\n                    return {\r\n                        ...response,\r\n                        hits: response.hits.map(rule => {\r\n                            // eslint-disable-next-line functional/immutable-data,no-param-reassign\r\n                            delete rule._highlightResult;\r\n                            return rule;\r\n                        }),\r\n                    };\r\n                });\r\n            },\r\n        });\r\n    };\r\n};\n\nconst browseSynonyms = (base) => {\r\n    return (requestOptions) => {\r\n        const options = {\r\n            hitsPerPage: 1000,\r\n            ...requestOptions,\r\n        };\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.hits.length < options.hitsPerPage,\r\n            ...options,\r\n            request(data) {\r\n                return searchSynonyms(base)('', { ...options, ...data }).then((response) => {\r\n                    return {\r\n                        ...response,\r\n                        hits: response.hits.map(synonym => {\r\n                            // eslint-disable-next-line functional/immutable-data,no-param-reassign\r\n                            delete synonym._highlightResult;\r\n                            return synonym;\r\n                        }),\r\n                    };\r\n                });\r\n            },\r\n        });\r\n    };\r\n};\n\nconst chunkedBatch = (base) => {\r\n    return (bodies, action, requestOptions) => {\r\n        const { batchSize, ...options } = requestOptions || {};\r\n        const response = {\r\n            taskIDs: [],\r\n            objectIDs: [],\r\n        };\r\n        const forEachBatch = (lastIndex = 0) => {\r\n            // eslint-disable-next-line functional/prefer-readonly-type\r\n            const bodiesChunk = [];\r\n            // eslint-disable-next-line functional/no-let\r\n            let index;\r\n            /* eslint-disable-next-line functional/no-loop-statement */\r\n            for (index = lastIndex; index < bodies.length; index++) {\r\n                // eslint-disable-next-line functional/immutable-data\r\n                bodiesChunk.push(bodies[index]);\r\n                if (bodiesChunk.length === (batchSize || 1000)) {\r\n                    break;\r\n                }\r\n            }\r\n            if (bodiesChunk.length === 0) {\r\n                return Promise.resolve(response);\r\n            }\r\n            return batch(base)(bodiesChunk.map(body => {\r\n                return {\r\n                    action,\r\n                    body,\r\n                };\r\n            }), options).then(res => {\r\n                response.objectIDs = response.objectIDs.concat(res.objectIDs); // eslint-disable-line functional/immutable-data\r\n                response.taskIDs.push(res.taskID); // eslint-disable-line functional/immutable-data\r\n                index++;\r\n                return forEachBatch(index);\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(forEachBatch(), (chunkedBatchResponse, waitRequestOptions) => {\r\n            return Promise.all(chunkedBatchResponse.taskIDs.map(taskID => {\r\n                return waitTask(base)(taskID, waitRequestOptions);\r\n            }));\r\n        });\r\n    };\r\n};\n\nconst clearObjects = (base) => {\r\n    return (requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/clear', base.indexName),\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst clearRules = (base) => {\r\n    return (requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/clear', base.indexName),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst clearSynonyms = (base) => {\r\n    return (requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/clear', base.indexName),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteBy = (base) => {\r\n    return (filters, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/deleteByQuery', base.indexName),\r\n            data: filters,\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteIndex = (base) => {\r\n    return (requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s', base.indexName),\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteObject = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(deleteObjects(base)([objectID], requestOptions).then(response => {\r\n            return { taskID: response.taskIDs[0] };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteObjects = (base) => {\r\n    return (objectIDs, requestOptions) => {\r\n        const objects = objectIDs.map(objectID => {\r\n            return { objectID };\r\n        });\r\n        return chunkedBatch(base)(objects, BatchActionEnum.DeleteObject, requestOptions);\r\n    };\r\n};\n\nconst deleteRule = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/%s', base.indexName, objectID),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteSynonym = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/%s', base.indexName, objectID),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst exists = (base) => {\r\n    return (requestOptions) => {\r\n        return getSettings(base)(requestOptions)\r\n            .then(() => true)\r\n            .catch(error => {\r\n            if (error.status !== 404) {\r\n                throw error;\r\n            }\r\n            return false;\r\n        });\r\n    };\r\n};\n\nconst findAnswers = (base) => {\r\n    return (query, queryLanguages, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/answers/%s/prediction', base.indexName),\r\n            data: {\r\n                query,\r\n                queryLanguages,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst findObject = (base) => {\r\n    return (callback, requestOptions) => {\r\n        const { query, paginate, ...options } = requestOptions || {};\r\n        // eslint-disable-next-line functional/no-let\r\n        let page = 0;\r\n        const forEachPage = () => {\r\n            return search(base)(query || '', { ...options, page }).then(result => {\r\n                // eslint-disable-next-line functional/no-loop-statement\r\n                for (const [position, hit] of Object.entries(result.hits)) {\r\n                    // eslint-disable-next-line promise/no-callback-in-promise\r\n                    if (callback(hit)) {\r\n                        return {\r\n                            object: hit,\r\n                            position: parseInt(position, 10),\r\n                            page,\r\n                        };\r\n                    }\r\n                }\r\n                page++;\r\n                // paginate if option was set and has next page\r\n                if (paginate === false || page >= result.nbPages) {\r\n                    throw createObjectNotFoundError();\r\n                }\r\n                return forEachPage();\r\n            });\r\n        };\r\n        return forEachPage();\r\n    };\r\n};\n\nconst getObject = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/%s', base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getObjectPosition = () => {\r\n    return (searchResponse, objectID) => {\r\n        // eslint-disable-next-line functional/no-loop-statement\r\n        for (const [position, hit] of Object.entries(searchResponse.hits)) {\r\n            if (hit.objectID === objectID) {\r\n                return parseInt(position, 10);\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n};\n\nconst getObjects = (base) => {\r\n    return (objectIDs, requestOptions) => {\r\n        const { attributesToRetrieve, ...options } = requestOptions || {};\r\n        const requests = objectIDs.map(objectID => {\r\n            return {\r\n                indexName: base.indexName,\r\n                objectID,\r\n                ...(attributesToRetrieve ? { attributesToRetrieve } : {}),\r\n            };\r\n        });\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/objects',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, options);\r\n    };\r\n};\n\nconst getRule = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/%s', base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSettings = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/settings', base.indexName),\r\n            data: {\r\n                getVersion: 2,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSynonym = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)(`1/indexes/%s/synonyms/%s`, base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/task/%s', base.indexName, taskID.toString()),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst partialUpdateObject = (base) => {\r\n    return (object, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(partialUpdateObjects(base)([object], requestOptions).then(response => {\r\n            return {\r\n                objectID: response.objectIDs[0],\r\n                taskID: response.taskIDs[0],\r\n            };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst partialUpdateObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { createIfNotExists, ...options } = requestOptions || {};\r\n        const action = createIfNotExists\r\n            ? BatchActionEnum.PartialUpdateObject\r\n            : BatchActionEnum.PartialUpdateObjectNoCreate;\r\n        return chunkedBatch(base)(objects, action, options);\r\n    };\r\n};\n\nconst replaceAllObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { safe, autoGenerateObjectIDIfNotExist, batchSize, ...options } = requestOptions || {};\r\n        const operation = (from, to, type, operationRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n                method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n                path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n                data: {\r\n                    operation: type,\r\n                    destination: to,\r\n                },\r\n            }, operationRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n        };\r\n        const randomSuffix = Math.random()\r\n            .toString(36)\r\n            .substring(7);\r\n        const temporaryIndexName = `${base.indexName}_tmp_${randomSuffix}`;\r\n        const saveObjectsInTemporary = saveObjects({\r\n            appId: base.appId,\r\n            transporter: base.transporter,\r\n            indexName: temporaryIndexName,\r\n        });\r\n        // @ts-ignore\r\n        // eslint-disable-next-line prefer-const, functional/no-let, functional/prefer-readonly-type\r\n        let responses = [];\r\n        const copyWaitablePromise = operation(base.indexName, temporaryIndexName, 'copy', {\r\n            ...options,\r\n            scope: ['settings', 'synonyms', 'rules'],\r\n        });\r\n        // eslint-disable-next-line functional/immutable-data\r\n        responses.push(copyWaitablePromise);\r\n        const result = (safe\r\n            ? copyWaitablePromise.wait(options)\r\n            : copyWaitablePromise)\r\n            .then(() => {\r\n            const saveObjectsWaitablePromise = saveObjectsInTemporary(objects, {\r\n                ...options,\r\n                autoGenerateObjectIDIfNotExist,\r\n                batchSize,\r\n            });\r\n            // eslint-disable-next-line functional/immutable-data\r\n            responses.push(saveObjectsWaitablePromise);\r\n            return safe ? saveObjectsWaitablePromise.wait(options) : saveObjectsWaitablePromise;\r\n        })\r\n            .then(() => {\r\n            const moveWaitablePromise = operation(temporaryIndexName, base.indexName, 'move', options);\r\n            // eslint-disable-next-line functional/immutable-data\r\n            responses.push(moveWaitablePromise);\r\n            return safe ? moveWaitablePromise.wait(options) : moveWaitablePromise;\r\n        })\r\n            .then(() => Promise.all(responses))\r\n            .then(([copyResponse, saveObjectsResponse, moveResponse]) => {\r\n            return {\r\n                objectIDs: saveObjectsResponse.objectIDs,\r\n                taskIDs: [copyResponse.taskID, ...saveObjectsResponse.taskIDs, moveResponse.taskID],\r\n            };\r\n        });\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(result, (_, waitRequestOptions) => {\r\n            return Promise.all(responses.map(response => response.wait(waitRequestOptions)));\r\n        });\r\n    };\r\n};\n\nconst replaceAllRules = (base) => {\r\n    return (rules, requestOptions) => {\r\n        return saveRules(base)(rules, {\r\n            ...requestOptions,\r\n            clearExistingRules: true,\r\n        });\r\n    };\r\n};\n\nconst replaceAllSynonyms = (base) => {\r\n    return (synonyms, requestOptions) => {\r\n        return saveSynonyms(base)(synonyms, {\r\n            ...requestOptions,\r\n            clearExistingSynonyms: true,\r\n        });\r\n    };\r\n};\n\nconst saveObject = (base) => {\r\n    return (object, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(saveObjects(base)([object], requestOptions).then(response => {\r\n            return {\r\n                objectID: response.objectIDs[0],\r\n                taskID: response.taskIDs[0],\r\n            };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst saveObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { autoGenerateObjectIDIfNotExist, ...options } = requestOptions || {};\r\n        const action = autoGenerateObjectIDIfNotExist\r\n            ? BatchActionEnum.AddObject\r\n            : BatchActionEnum.UpdateObject;\r\n        if (action === BatchActionEnum.UpdateObject) {\r\n            // eslint-disable-next-line functional/no-loop-statement\r\n            for (const object of objects) {\r\n                if (object.objectID === undefined) {\r\n                    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(Promise.reject(createMissingObjectIDError()));\r\n                }\r\n            }\r\n        }\r\n        return chunkedBatch(base)(objects, action, options);\r\n    };\r\n};\n\nconst saveRule = (base) => {\r\n    return (rule, requestOptions) => {\r\n        return saveRules(base)([rule], requestOptions);\r\n    };\r\n};\n\nconst saveRules = (base) => {\r\n    return (rules, requestOptions) => {\r\n        const { forwardToReplicas, clearExistingRules, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        if (clearExistingRules) {\r\n            mappedRequestOptions.queryParameters.clearExistingRules = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/batch', base.indexName),\r\n            data: rules,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst saveSynonym = (base) => {\r\n    return (synonym, requestOptions) => {\r\n        return saveSynonyms(base)([synonym], requestOptions);\r\n    };\r\n};\n\nconst saveSynonyms = (base) => {\r\n    return (synonyms, requestOptions) => {\r\n        const { forwardToReplicas, clearExistingSynonyms, replaceExistingSynonyms, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        if (replaceExistingSynonyms || clearExistingSynonyms) {\r\n            mappedRequestOptions.queryParameters.replaceExistingSynonyms = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/batch', base.indexName),\r\n            data: synonyms,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst search = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/query', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchForFacetValues = (base) => {\r\n    return (facetName, facetQuery, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/facets/%s/query', base.indexName, facetName),\r\n            data: {\r\n                facetQuery,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchRules = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/search', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchSynonyms = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/search', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setSettings = (base) => {\r\n    return (settings, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/settings', base.indexName),\r\n            data: settings,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst waitTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getTask(base)(taskID, requestOptions).then(response => {\r\n                return response.status !== 'published' ? retry() : undefined;\r\n            });\r\n        });\r\n    };\r\n};\n\nconst ApiKeyACLEnum = {\r\n    AddObject: 'addObject',\r\n    Analytics: 'analytics',\r\n    Browser: 'browse',\r\n    DeleteIndex: 'deleteIndex',\r\n    DeleteObject: 'deleteObject',\r\n    EditSettings: 'editSettings',\r\n    Inference: 'inference',\r\n    ListIndexes: 'listIndexes',\r\n    Logs: 'logs',\r\n    Personalization: 'personalization',\r\n    Recommendation: 'recommendation',\r\n    Search: 'search',\r\n    SeeUnretrievableAttributes: 'seeUnretrievableAttributes',\r\n    Settings: 'settings',\r\n    Usage: 'usage',\r\n};\n\nconst BatchActionEnum = {\r\n    AddObject: 'addObject',\r\n    UpdateObject: 'updateObject',\r\n    PartialUpdateObject: 'partialUpdateObject',\r\n    PartialUpdateObjectNoCreate: 'partialUpdateObjectNoCreate',\r\n    DeleteObject: 'deleteObject',\r\n    DeleteIndex: 'delete',\r\n    ClearIndex: 'clear',\r\n};\n\nconst ScopeEnum = {\r\n    Settings: 'settings',\r\n    Synonyms: 'synonyms',\r\n    Rules: 'rules',\r\n};\n\nconst StrategyEnum = {\r\n    None: 'none',\r\n    StopIfEnoughMatches: 'stopIfEnoughMatches',\r\n};\n\nconst SynonymEnum = {\r\n    Synonym: 'synonym',\r\n    OneWaySynonym: 'oneWaySynonym',\r\n    AltCorrection1: 'altCorrection1',\r\n    AltCorrection2: 'altCorrection2',\r\n    Placeholder: 'placeholder',\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXNlYXJjaC9kaXN0L2NsaWVudC1zZWFyY2guZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBJO0FBQ2pCO0FBQ2xFO0FBQ25COztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxvQkFBb0I7QUFDcEI7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixrRUFBVSxxREFBcUQsNERBQVE7QUFDeEYsd0JBQXdCLHVFQUFpQjtBQUN6QztBQUNBLGNBQWMsUUFBUSxNQUFNLDJCQUEyQiwwREFBUSxPQUFPO0FBQ3RFLGNBQWMsUUFBUSxNQUFNLHVCQUF1QiwwREFBUSxRQUFRO0FBQ25FLGlCQUFpQiwrREFBTztBQUN4QixjQUFjLFFBQVEsTUFBTSxvQkFBb0I7QUFDaEQsY0FBYyxRQUFRLE1BQU0sb0JBQW9CO0FBQ2hELGNBQWMsUUFBUSxNQUFNLG9CQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxREFBcUQ7QUFDdEU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxrQkFBa0I7QUFDMUQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxXQUFXLGtFQUFVO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNB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X21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXNlYXJjaC9kaXN0L2NsaWVudC1zZWFyY2guZXNtLmpzP2NmYTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQXV0aCwgQXV0aE1vZGUsIHNodWZmbGUsIGFkZE1ldGhvZHMsIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZSwgY3JlYXRlUmV0cnlhYmxlUHJvbWlzZSwgZW5jb2RlIH0gZnJvbSAnQGFsZ29saWEvY2xpZW50LWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnRlciwgQ2FsbEVudW0sIGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zLCBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMgfSBmcm9tICdAYWxnb2xpYS90cmFuc3BvcnRlcic7XG5pbXBvcnQgeyBNZXRob2RFbnVtIH0gZnJvbSAnQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVIbWFjIH0gZnJvbSAnY3J5cHRvJztcblxuZnVuY3Rpb24gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZShvcHRpb25zKSB7XHJcbiAgICBjb25zdCBicm93c2UgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLnJlcXVlc3QoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJzdCB3ZSBzZW5kIHRvIHRoZSBkZXZlbG9wZXIgdGhlXHJcbiAgICAgICAgICAgICAqIGJhdGNoIHJldHJpZXZlZCBmcm9tIHRoZSBBUEkuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iYXRjaCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJhdGNoKHJlc3BvbnNlLmhpdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUaGVuLCB3ZSBhc2sgdG8gdGhlIGJyb3dzZSBjb25jcmV0ZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAgICAgKiBpZiB3ZSBzaG91bGQgc3RvcCBicm93c2luZy4gQXMgZXhhbXBsZSwgdGhlIGBicm93c2VPYmplY3RzYFxyXG4gICAgICAgICAgICAgKiBtZXRob2Qgd2lsbCBzdG9wIGlmIHRoZSBjdXJzb3IgaXMgbm90IHByZXNlbnQgb24gdGhlIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2hvdWxkU3RvcChyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZpbmFsbHksIGlmIHRoZSByZXNwb25zZSBjb250YWlucyBhIGN1cnNvciwgd2UgYnJvd3NlIHRvIHRoZSBuZXh0XHJcbiAgICAgICAgICAgICAqIGJhdGNoIHVzaW5nIHRoYXQgc2FtZSBjdXJzb3IuIE90aGVyd2lzZSwgd2UganVzdCB1c2UgdGhlIHRyYWRpdGlvbmFsXHJcbiAgICAgICAgICAgICAqIGJyb3dzaW5nIHVzaW5nIHRoZSBwYWdlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnJvd3NlKHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHJlc3BvbnNlLmN1cnNvcixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBicm93c2Uoe1xyXG4gICAgICAgICAgICAgICAgcGFnZTogKGRhdGEucGFnZSB8fCAwKSArIDEsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBicm93c2Uoe30pO1xyXG59XG5cbmNvbnN0IGNyZWF0ZVNlYXJjaENsaWVudCA9IG9wdGlvbnMgPT4ge1xyXG4gICAgY29uc3QgYXBwSWQgPSBvcHRpb25zLmFwcElkO1xyXG4gICAgY29uc3QgYXV0aCA9IGNyZWF0ZUF1dGgob3B0aW9ucy5hdXRoTW9kZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRoTW9kZSA6IEF1dGhNb2RlLldpdGhpbkhlYWRlcnMsIGFwcElkLCBvcHRpb25zLmFwaUtleSk7XHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKHtcclxuICAgICAgICBob3N0czogW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LWRzbi5hbGdvbGlhLm5ldGAsIGFjY2VwdDogQ2FsbEVudW0uUmVhZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LmFsZ29saWEubmV0YCwgYWNjZXB0OiBDYWxsRW51bS5Xcml0ZSB9LFxyXG4gICAgICAgIF0uY29uY2F0KHNodWZmbGUoW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LTEuYWxnb2xpYW5ldC5jb21gIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0tMi5hbGdvbGlhbmV0LmNvbWAgfSxcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS0zLmFsZ29saWFuZXQuY29tYCB9LFxyXG4gICAgICAgIF0pKSxcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgLi4uYXV0aC5oZWFkZXJzKCksXHJcbiAgICAgICAgICAgIC4uLnsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLnF1ZXJ5UGFyYW1ldGVycygpLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBiYXNlID0ge1xyXG4gICAgICAgIHRyYW5zcG9ydGVyLFxyXG4gICAgICAgIGFwcElkLFxyXG4gICAgICAgIGFkZEFsZ29saWFBZ2VudChzZWdtZW50LCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyLnVzZXJBZ2VudC5hZGQoeyBzZWdtZW50LCB2ZXJzaW9uIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXJDYWNoZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLnJlcXVlc3RzQ2FjaGUuY2xlYXIoKSxcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLnJlc3BvbnNlc0NhY2hlLmNsZWFyKCksXHJcbiAgICAgICAgICAgIF0pLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBhZGRNZXRob2RzKGJhc2UsIG9wdGlvbnMubWV0aG9kcyk7XHJcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdPYmplY3RJREVycm9yKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnTWlzc2luZ09iamVjdElERXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdBbGwgb2JqZWN0cyBtdXN0IGhhdmUgYW4gdW5pcXVlIG9iamVjdElEICcgK1xyXG4gICAgICAgICAgICAnKGxpa2UgYSBwcmltYXJ5IGtleSkgdG8gYmUgdmFsaWQuICcgK1xyXG4gICAgICAgICAgICAnQWxnb2xpYSBpcyBhbHNvIGFibGUgdG8gZ2VuZXJhdGUgb2JqZWN0SURzICcgK1xyXG4gICAgICAgICAgICBcImF1dG9tYXRpY2FsbHkgYnV0ICppdCdzIG5vdCByZWNvbW1lbmRlZCouIFwiICtcclxuICAgICAgICAgICAgXCJUbyBkbyBpdCwgdXNlIHRoZSBgeydhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3QnOiB0cnVlfWAgb3B0aW9uLlwiLFxyXG4gICAgfTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVPYmplY3ROb3RGb3VuZEVycm9yKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnT2JqZWN0Tm90Rm91bmRFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ09iamVjdCBub3QgZm91bmQuJyxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmFsaWRVbnRpbE5vdEZvdW5kRXJyb3IoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdWYWxpZFVudGlsTm90Rm91bmRFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1ZhbGlkVW50aWwgbm90IGZvdW5kIGluIGdpdmVuIHNlY3VyZWQgYXBpIGtleS4nLFxyXG4gICAgfTtcclxufVxuXG5jb25zdCBhZGRBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhY2wsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBxdWVyeVBhcmFtZXRlcnMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFjbCxcclxuICAgICAgICAgICAgLi4uKHF1ZXJ5UGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8geyBxdWVyeVBhcmFtZXRlcnMgfSA6IHt9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHdhaXQgPSAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUHJvbWlzZShyZXRyeSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXBpS2V5KGJhc2UpKHJlc3BvbnNlLmtleSwgd2FpdFJlcXVlc3RPcHRpb25zKS5jYXRjaCgoYXBpRXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpRXJyb3Iuc3RhdHVzICE9PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgYXBpRXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRyeSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2tleXMnLFxyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpLCB3YWl0KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGFzc2lnblVzZXJJRCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHVzZXJJRCwgY2x1c3Rlck5hbWUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnNbJ1gtQWxnb2xpYS1Vc2VyLUlEJ10gPSB1c2VySUQ7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZycsXHJcbiAgICAgICAgICAgIGRhdGE6IHsgY2x1c3RlcjogY2x1c3Rlck5hbWUgfSxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBhc3NpZ25Vc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodXNlcklEcywgY2x1c3Rlck5hbWUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZy9iYXRjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJzOiB1c2VySURzLFxyXG4gICAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3Rlck5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgY2xlYXJEaWN0aW9uYXJ5RW50cmllcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGRpY3Rpb25hcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnLzEvZGljdGlvbmFyaWVzLyVzL2JhdGNoJywgZGljdGlvbmFyeSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGNsZWFyRXhpc3RpbmdEaWN0aW9uYXJ5RW50cmllczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzOiB7IGFjdGlvbjogJ2FkZEVudHJ5JywgYm9keTogW10gfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0QXBwVGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgY29weUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZnJvbSwgdG8sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkoZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kczogeyB3YWl0VGFzayB9LFxyXG4gICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvb3BlcmF0aW9uJywgZnJvbSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2NvcHknLFxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5UnVsZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5SdWxlc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5U2V0dGluZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5TZXR0aW5nc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5U3lub255bXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5TeW5vbnltc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjdXN0b21SZXF1ZXN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IE1ldGhvZEVudW0uR2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXRyeSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGFwaUVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGFwaUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIHdhaXQpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlRGljdGlvbmFyeUVudHJpZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChkaWN0aW9uYXJ5LCBvYmplY3RJRHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBvYmplY3RJRHMubWFwKG9iamVjdElEID0+ICh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZUVudHJ5JyxcclxuICAgICAgICAgICAgYm9keTogeyBvYmplY3RJRCB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcvMS9kaWN0aW9uYXJpZXMvJXMvYmF0Y2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YTogeyBjbGVhckV4aXN0aW5nRGljdGlvbmFyeUVudHJpZXM6IGZhbHNlLCByZXF1ZXN0cyB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRBcHBUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZW5lcmF0ZVNlY3VyZWRBcGlLZXkgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKHBhcmVudEFwaUtleSwgcmVzdHJpY3Rpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gc2VyaWFsaXplUXVlcnlQYXJhbWV0ZXJzKHJlc3RyaWN0aW9ucyk7XHJcbiAgICAgICAgY29uc3Qgc2VjdXJlZEtleSA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIHBhcmVudEFwaUtleSlcclxuICAgICAgICAgICAgLnVwZGF0ZShxdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgICAgIC5kaWdlc3QoJ2hleCcpO1xyXG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShzZWN1cmVkS2V5ICsgcXVlcnlQYXJhbWV0ZXJzKS50b1N0cmluZygnYmFzZTY0Jyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBcHBUYXNrID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodGFza0lELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvdGFzay8lcycsIHRhc2tJRC50b1N0cmluZygpKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXREaWN0aW9uYXJ5U2V0dGluZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnLzEvZGljdGlvbmFyaWVzLyovc2V0dGluZ3MnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldExvZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9sb2dzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRTZWN1cmVkQXBpS2V5UmVtYWluaW5nVmFsaWRpdHkgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKHNlY3VyZWRBcGlLZXkpID0+IHtcclxuICAgICAgICBjb25zdCBkZWNvZGVkU3RyaW5nID0gQnVmZmVyLmZyb20oc2VjdXJlZEFwaUtleSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCdhc2NpaScpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL3ZhbGlkVW50aWw9KFxcZCspLztcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGRlY29kZWRTdHJpbmcubWF0Y2gocmVnZXgpO1xyXG4gICAgICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVWYWxpZFVudGlsTm90Rm91bmRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSAtIE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFRvcFVzZXJJRHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9jbHVzdGVycy9tYXBwaW5nL3RvcCcsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VXNlcklEID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodXNlcklELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvY2x1c3RlcnMvbWFwcGluZy8lcycsIHVzZXJJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgaGFzUGVuZGluZ01hcHBpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IHJldHJpZXZlTWFwcGluZ3MsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGlmIChyZXRyaWV2ZU1hcHBpbmdzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgIG9wdGlvbnMuZ2V0Q2x1c3RlcnMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZy9wZW5kaW5nJyxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGluaXRJbmRleCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGluZGV4TmFtZSwgb3B0aW9ucyA9IHt9KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5kZXggPSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyOiBiYXNlLnRyYW5zcG9ydGVyLFxyXG4gICAgICAgICAgICBhcHBJZDogYmFzZS5hcHBJZCxcclxuICAgICAgICAgICAgaW5kZXhOYW1lLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGFkZE1ldGhvZHMoc2VhcmNoSW5kZXgsIG9wdGlvbnMubWV0aG9kcyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBsaXN0QXBpS2V5cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2tleXMnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGxpc3RDbHVzdGVycyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2NsdXN0ZXJzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBsaXN0SW5kaWNlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGxpc3RVc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZycsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgbW92ZUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZnJvbSwgdG8sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkoZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kczogeyB3YWl0VGFzayB9LFxyXG4gICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvb3BlcmF0aW9uJywgZnJvbSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ21vdmUnLFxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZUJhdGNoID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhyZXNwb25zZS50YXNrSUQpLm1hcChpbmRleE5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluaXRJbmRleChiYXNlKShpbmRleE5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2RzOiB7IHdhaXRUYXNrIH0sXHJcbiAgICAgICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSURbaW5kZXhOYW1lXSwgd2FpdFJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9iYXRjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZUdldE9iamVjdHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9vYmplY3RzJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgbXVsdGlwbGVRdWVyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHF1ZXJpZXMubWFwKHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMocXVlcnkucGFyYW1zIHx8IHt9KSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9xdWVyaWVzJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZVNlYXJjaEZvckZhY2V0VmFsdWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocXVlcmllcy5tYXAocXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGZhY2V0TmFtZSwgZmFjZXRRdWVyeSwgLi4ucGFyYW1zIH0gPSBxdWVyeS5wYXJhbXM7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkocXVlcnkuaW5kZXhOYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2RzOiB7IHNlYXJjaEZvckZhY2V0VmFsdWVzIH0sXHJcbiAgICAgICAgICAgIH0pLnNlYXJjaEZvckZhY2V0VmFsdWVzKGZhY2V0TmFtZSwgZmFjZXRRdWVyeSwge1xyXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlbW92ZVVzZXJJRCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHVzZXJJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVyc1snWC1BbGdvbGlhLVVzZXItSUQnXSA9IHVzZXJJRDtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2NsdXN0ZXJzL21hcHBpbmcnLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlcGxhY2VEaWN0aW9uYXJ5RW50cmllcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGRpY3Rpb25hcnksIGVudHJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBlbnRyaWVzLm1hcChlbnRyeSA9PiAoe1xyXG4gICAgICAgICAgICBhY3Rpb246ICdhZGRFbnRyeScsXHJcbiAgICAgICAgICAgIGJvZHk6IGVudHJ5LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcvMS9kaWN0aW9uYXJpZXMvJXMvYmF0Y2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YTogeyBjbGVhckV4aXN0aW5nRGljdGlvbmFyeUVudHJpZXM6IHRydWUsIHJlcXVlc3RzIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdEFwcFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlc3RvcmVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucykuY2F0Y2goKGFwaUVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGFwaUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0cnkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEva2V5cy8lcy9yZXN0b3JlJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIHdhaXQpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZURpY3Rpb25hcnlFbnRyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZGljdGlvbmFyeSwgZW50cmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IGVudHJpZXMubWFwKGVudHJ5ID0+ICh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2FkZEVudHJ5JyxcclxuICAgICAgICAgICAgYm9keTogZW50cnksXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJy8xL2RpY3Rpb25hcmllcy8lcy9iYXRjaCcsIGRpY3Rpb25hcnkpLFxyXG4gICAgICAgICAgICBkYXRhOiB7IGNsZWFyRXhpc3RpbmdEaWN0aW9uYXJ5RW50cmllczogZmFsc2UsIHJlcXVlc3RzIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdEFwcFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaERpY3Rpb25hcnlFbnRyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZGljdGlvbmFyeSwgcXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJy8xL2RpY3Rpb25hcmllcy8lcy9zZWFyY2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hVc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9jbHVzdGVycy9tYXBwaW5nL3NlYXJjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNldERpY3Rpb25hcnlTZXR0aW5ncyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHNldHRpbmdzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcvMS9kaWN0aW9uYXJpZXMvKi9zZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGRhdGE6IHNldHRpbmdzLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRBcHBUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCB1cGRhdGVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5UGFyYW1ldGVycywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHF1ZXJ5UGFyYW1ldGVycyA/IHsgcXVlcnlQYXJhbWV0ZXJzIH0gOiB7fTtcclxuICAgICAgICBjb25zdCBhcGlLZXlGaWVsZHMgPSBbXHJcbiAgICAgICAgICAgICdhY2wnLFxyXG4gICAgICAgICAgICAnaW5kZXhlcycsXHJcbiAgICAgICAgICAgICdyZWZlcmVycycsXHJcbiAgICAgICAgICAgICdyZXN0cmljdFNvdXJjZXMnLFxyXG4gICAgICAgICAgICAncXVlcnlQYXJhbWV0ZXJzJyxcclxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgJ21heFF1ZXJpZXNQZXJJUFBlckhvdXInLFxyXG4gICAgICAgICAgICAnbWF4SGl0c1BlclF1ZXJ5JyxcclxuICAgICAgICBdO1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgYWxsIHRoZSBmaWVsZHMgcmV0cmlldmVkIHRocm91Z2ggZ2V0QXBpS2V5IGFyZSB0aGUgc2FtZSBhcyB0aGUgb25lcyB3ZSB3YW50ZWQgdG8gdXBkYXRlXHJcbiAgICAgICAgY29uc3QgaGFzQ2hhbmdlZCA9IChnZXRBcGlLZXlSZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModXBkYXRlZEZpZWxkcylcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHVwZGF0ZWRGaWVsZCkgPT4gYXBpS2V5RmllbGRzLmluZGV4T2YodXBkYXRlZEZpZWxkKSAhPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAuZXZlcnkodXBkYXRlZEZpZWxkID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaWVsZCBpcyBhbiBhcnJheSwgd2UgbmVlZCB0byBjaGVjayB0aGF0IHRoZXkgYXJlIHRoZSBzYW1lIGxlbmd0aCBhbmQgdGhhdCBhbGwgdGhlIHZhbHVlcyBhcmUgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdldEFwaUtleVJlc3BvbnNlW3VwZGF0ZWRGaWVsZF0pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh1cGRhdGVkRmllbGRzW3VwZGF0ZWRGaWVsZF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0QXBpS2V5UmVzcG9uc2VBcnJheSA9IGdldEFwaUtleVJlc3BvbnNlW3VwZGF0ZWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRBcGlLZXlSZXNwb25zZUFycmF5Lmxlbmd0aCA9PT0gdXBkYXRlZEZpZWxkc1t1cGRhdGVkRmllbGRdLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBcGlLZXlSZXNwb25zZUFycmF5LmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSB1cGRhdGVkRmllbGRzW3VwZGF0ZWRGaWVsZF1baW5kZXhdKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXBpS2V5UmVzcG9uc2VbdXBkYXRlZEZpZWxkXSA9PT0gdXBkYXRlZEZpZWxkc1t1cGRhdGVkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHdhaXQgPSAoXywgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiBjcmVhdGVSZXRyeWFibGVQcm9taXNlKHJldHJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucykudGhlbihnZXRBcGlLZXlSZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZChnZXRBcGlLZXlSZXNwb25zZSkgPyBQcm9taXNlLnJlc29sdmUoKSA6IHJldHJ5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICB9LCBvcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCB3YWl0QXBwVGFzayA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUHJvbWlzZShyZXRyeSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRBcHBUYXNrKGJhc2UpKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyAhPT0gJ3B1Ymxpc2hlZCcgPyByZXRyeSgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJhdGNoID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBicm93c2VPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmN1cnNvciA9PT0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdDogKGRhdGEpID0+IGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2Jyb3dzZScsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJyb3dzZVJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoaXRzUGVyUGFnZTogMTAwMCxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmhpdHMubGVuZ3RoIDwgb3B0aW9ucy5oaXRzUGVyUGFnZSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoUnVsZXMoYmFzZSkoJycsIHsgLi4ub3B0aW9ucywgLi4uZGF0YSB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzOiByZXNwb25zZS5oaXRzLm1hcChydWxlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcnVsZS5faGlnaGxpZ2h0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJyb3dzZVN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoaXRzUGVyUGFnZTogMTAwMCxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmhpdHMubGVuZ3RoIDwgb3B0aW9ucy5oaXRzUGVyUGFnZSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoU3lub255bXMoYmFzZSkoJycsIHsgLi4ub3B0aW9ucywgLi4uZGF0YSB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzOiByZXNwb25zZS5oaXRzLm1hcChzeW5vbnltID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3lub255bS5faGlnaGxpZ2h0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5bm9ueW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGNodW5rZWRCYXRjaCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGJvZGllcywgYWN0aW9uLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgYmF0Y2hTaXplLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgdGFza0lEczogW10sXHJcbiAgICAgICAgICAgIG9iamVjdElEczogW10sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBmb3JFYWNoQmF0Y2ggPSAobGFzdEluZGV4ID0gMCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgICAgICAgICBjb25zdCBib2RpZXNDaHVuayA9IFtdO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgICAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sb29wLXN0YXRlbWVudCAqL1xyXG4gICAgICAgICAgICBmb3IgKGluZGV4ID0gbGFzdEluZGV4OyBpbmRleCA8IGJvZGllcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgICAgICBib2RpZXNDaHVuay5wdXNoKGJvZGllc1tpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZGllc0NodW5rLmxlbmd0aCA9PT0gKGJhdGNoU2l6ZSB8fCAxMDAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChib2RpZXNDaHVuay5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiYXRjaChiYXNlKShib2RpZXNDaHVuay5tYXAoYm9keSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBib2R5LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSksIG9wdGlvbnMpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLm9iamVjdElEcyA9IHJlc3BvbnNlLm9iamVjdElEcy5jb25jYXQocmVzLm9iamVjdElEcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGFza0lEcy5wdXNoKHJlcy50YXNrSUQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9yRWFjaEJhdGNoKGluZGV4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGZvckVhY2hCYXRjaCgpLCAoY2h1bmtlZEJhdGNoUmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoY2h1bmtlZEJhdGNoUmVzcG9uc2UudGFza0lEcy5tYXAodGFza0lEID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3YWl0VGFzayhiYXNlKSh0YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGNsZWFyT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjbGVhclJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGZvcndhcmRUb1JlcGxpY2FzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3J1bGVzL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjbGVhclN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGZvcndhcmRUb1JlcGxpY2FzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3N5bm9ueW1zL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVCeSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGZpbHRlcnMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2RlbGV0ZUJ5UXVlcnknLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IGZpbHRlcnMsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGRlbGV0ZUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uRGVsZXRlLFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcycsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlT2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShkZWxldGVPYmplY3RzKGJhc2UpKFtvYmplY3RJRF0sIHJlcXVlc3RPcHRpb25zKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdIH07XHJcbiAgICAgICAgfSksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElEcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvYmplY3RzID0gb2JqZWN0SURzLm1hcChvYmplY3RJRCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG9iamVjdElEIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNodW5rZWRCYXRjaChiYXNlKShvYmplY3RzLCBCYXRjaEFjdGlvbkVudW0uRGVsZXRlT2JqZWN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVSdWxlID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBmb3J3YXJkVG9SZXBsaWNhcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3J1bGVzLyVzJywgYmFzZS5pbmRleE5hbWUsIG9iamVjdElEKSxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlU3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uRGVsZXRlLFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zeW5vbnltcy8lcycsIGJhc2UuaW5kZXhOYW1lLCBvYmplY3RJRCksXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGV4aXN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdldFNldHRpbmdzKGJhc2UpKHJlcXVlc3RPcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzICE9PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGZpbmRBbnN3ZXJzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHF1ZXJ5TGFuZ3VhZ2VzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2Fuc3dlcnMvJXMvcHJlZGljdGlvbicsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgICAgICBxdWVyeUxhbmd1YWdlcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGZpbmRPYmplY3QgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChjYWxsYmFjaywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5LCBwYWdpbmF0ZSwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICAgICAgbGV0IHBhZ2UgPSAwO1xyXG4gICAgICAgIGNvbnN0IGZvckVhY2hQYWdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VhcmNoKGJhc2UpKHF1ZXJ5IHx8ICcnLCB7IC4uLm9wdGlvbnMsIHBhZ2UgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3Bvc2l0aW9uLCBoaXRdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3VsdC5oaXRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL25vLWNhbGxiYWNrLWluLXByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soaGl0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBoaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcGFyc2VJbnQocG9zaXRpb24sIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFnZSsrO1xyXG4gICAgICAgICAgICAgICAgLy8gcGFnaW5hdGUgaWYgb3B0aW9uIHdhcyBzZXQgYW5kIGhhcyBuZXh0IHBhZ2VcclxuICAgICAgICAgICAgICAgIGlmIChwYWdpbmF0ZSA9PT0gZmFsc2UgfHwgcGFnZSA+PSByZXN1bHQubmJQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU9iamVjdE5vdEZvdW5kRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3JFYWNoUGFnZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmb3JFYWNoUGFnZSgpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0T2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzLyVzJywgYmFzZS5pbmRleE5hbWUsIG9iamVjdElEKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRPYmplY3RQb3NpdGlvbiA9ICgpID0+IHtcclxuICAgIHJldHVybiAoc2VhcmNoUmVzcG9uc2UsIG9iamVjdElEKSA9PiB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgICAgICBmb3IgKGNvbnN0IFtwb3NpdGlvbiwgaGl0XSBvZiBPYmplY3QuZW50cmllcyhzZWFyY2hSZXNwb25zZS5oaXRzKSkge1xyXG4gICAgICAgICAgICBpZiAoaGl0Lm9iamVjdElEID09PSBvYmplY3RJRCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBvc2l0aW9uLCAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0T2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElEcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZXNUb1JldHJpZXZlLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IG9iamVjdElEcy5tYXAob2JqZWN0SUQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhOYW1lOiBiYXNlLmluZGV4TmFtZSxcclxuICAgICAgICAgICAgICAgIG9iamVjdElELFxyXG4gICAgICAgICAgICAgICAgLi4uKGF0dHJpYnV0ZXNUb1JldHJpZXZlID8geyBhdHRyaWJ1dGVzVG9SZXRyaWV2ZSB9IDoge30pLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL29iamVjdHMnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0cyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFJ1bGUgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChvYmplY3RJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvJXMnLCBiYXNlLmluZGV4TmFtZSwgb2JqZWN0SUQpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFNldHRpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc2V0dGluZ3MnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGdldFZlcnNpb246IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0U3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoYDEvaW5kZXhlcy8lcy9zeW5vbnltcy8lc2AsIGJhc2UuaW5kZXhOYW1lLCBvYmplY3RJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VGFzayA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvdGFzay8lcycsIGJhc2UuaW5kZXhOYW1lLCB0YXNrSUQudG9TdHJpbmcoKSksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcGFydGlhbFVwZGF0ZU9iamVjdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKHBhcnRpYWxVcGRhdGVPYmplY3RzKGJhc2UpKFtvYmplY3RdLCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RJRDogcmVzcG9uc2Uub2JqZWN0SURzWzBdLFxyXG4gICAgICAgICAgICAgICAgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHBhcnRpYWxVcGRhdGVPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGNyZWF0ZUlmTm90RXhpc3RzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBjcmVhdGVJZk5vdEV4aXN0c1xyXG4gICAgICAgICAgICA/IEJhdGNoQWN0aW9uRW51bS5QYXJ0aWFsVXBkYXRlT2JqZWN0XHJcbiAgICAgICAgICAgIDogQmF0Y2hBY3Rpb25FbnVtLlBhcnRpYWxVcGRhdGVPYmplY3ROb0NyZWF0ZTtcclxuICAgICAgICByZXR1cm4gY2h1bmtlZEJhdGNoKGJhc2UpKG9iamVjdHMsIGFjdGlvbiwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCByZXBsYWNlQWxsT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBzYWZlLCBhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3QsIGJhdGNoU2l6ZSwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gKGZyb20sIHRvLCB0eXBlLCBvcGVyYXRpb25SZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9vcGVyYXRpb24nLCBmcm9tKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSwgb3BlcmF0aW9uUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbVN1ZmZpeCA9IE1hdGgucmFuZG9tKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgICAgICAgICAuc3Vic3RyaW5nKDcpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBvcmFyeUluZGV4TmFtZSA9IGAke2Jhc2UuaW5kZXhOYW1lfV90bXBfJHtyYW5kb21TdWZmaXh9YDtcclxuICAgICAgICBjb25zdCBzYXZlT2JqZWN0c0luVGVtcG9yYXJ5ID0gc2F2ZU9iamVjdHMoe1xyXG4gICAgICAgICAgICBhcHBJZDogYmFzZS5hcHBJZCxcclxuICAgICAgICAgICAgdHJhbnNwb3J0ZXI6IGJhc2UudHJhbnNwb3J0ZXIsXHJcbiAgICAgICAgICAgIGluZGV4TmFtZTogdGVtcG9yYXJ5SW5kZXhOYW1lLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0LCBmdW5jdGlvbmFsL25vLWxldCwgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgICAgIGxldCByZXNwb25zZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBjb3B5V2FpdGFibGVQcm9taXNlID0gb3BlcmF0aW9uKGJhc2UuaW5kZXhOYW1lLCB0ZW1wb3JhcnlJbmRleE5hbWUsICdjb3B5Jywge1xyXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogWydzZXR0aW5ncycsICdzeW5vbnltcycsICdydWxlcyddLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgcmVzcG9uc2VzLnB1c2goY29weVdhaXRhYmxlUHJvbWlzZSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHNhZmVcclxuICAgICAgICAgICAgPyBjb3B5V2FpdGFibGVQcm9taXNlLndhaXQob3B0aW9ucylcclxuICAgICAgICAgICAgOiBjb3B5V2FpdGFibGVQcm9taXNlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVPYmplY3RzV2FpdGFibGVQcm9taXNlID0gc2F2ZU9iamVjdHNJblRlbXBvcmFyeShvYmplY3RzLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgYXV0b0dlbmVyYXRlT2JqZWN0SURJZk5vdEV4aXN0LFxyXG4gICAgICAgICAgICAgICAgYmF0Y2hTaXplLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgcmVzcG9uc2VzLnB1c2goc2F2ZU9iamVjdHNXYWl0YWJsZVByb21pc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FmZSA/IHNhdmVPYmplY3RzV2FpdGFibGVQcm9taXNlLndhaXQob3B0aW9ucykgOiBzYXZlT2JqZWN0c1dhaXRhYmxlUHJvbWlzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVXYWl0YWJsZVByb21pc2UgPSBvcGVyYXRpb24odGVtcG9yYXJ5SW5kZXhOYW1lLCBiYXNlLmluZGV4TmFtZSwgJ21vdmUnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgcmVzcG9uc2VzLnB1c2gobW92ZVdhaXRhYmxlUHJvbWlzZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzYWZlID8gbW92ZVdhaXRhYmxlUHJvbWlzZS53YWl0KG9wdGlvbnMpIDogbW92ZVdhaXRhYmxlUHJvbWlzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbChyZXNwb25zZXMpKVxyXG4gICAgICAgICAgICAudGhlbigoW2NvcHlSZXNwb25zZSwgc2F2ZU9iamVjdHNSZXNwb25zZSwgbW92ZVJlc3BvbnNlXSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0SURzOiBzYXZlT2JqZWN0c1Jlc3BvbnNlLm9iamVjdElEcyxcclxuICAgICAgICAgICAgICAgIHRhc2tJRHM6IFtjb3B5UmVzcG9uc2UudGFza0lELCAuLi5zYXZlT2JqZWN0c1Jlc3BvbnNlLnRhc2tJRHMsIG1vdmVSZXNwb25zZS50YXNrSURdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UocmVzdWx0LCAoXywgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLndhaXQod2FpdFJlcXVlc3RPcHRpb25zKSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcmVwbGFjZUFsbFJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocnVsZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVSdWxlcyhiYXNlKShydWxlcywge1xyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgY2xlYXJFeGlzdGluZ1J1bGVzOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcmVwbGFjZUFsbFN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoc3lub255bXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVTeW5vbnltcyhiYXNlKShzeW5vbnltcywge1xyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgY2xlYXJFeGlzdGluZ1N5bm9ueW1zOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZU9iamVjdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKHNhdmVPYmplY3RzKGJhc2UpKFtvYmplY3RdLCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RJRDogcmVzcG9uc2Uub2JqZWN0SURzWzBdLFxyXG4gICAgICAgICAgICAgICAgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGF1dG9HZW5lcmF0ZU9iamVjdElESWZOb3RFeGlzdCwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gYXV0b0dlbmVyYXRlT2JqZWN0SURJZk5vdEV4aXN0XHJcbiAgICAgICAgICAgID8gQmF0Y2hBY3Rpb25FbnVtLkFkZE9iamVjdFxyXG4gICAgICAgICAgICA6IEJhdGNoQWN0aW9uRW51bS5VcGRhdGVPYmplY3Q7XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gQmF0Y2hBY3Rpb25FbnVtLlVwZGF0ZU9iamVjdCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sb29wLXN0YXRlbWVudFxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9iamVjdCBvZiBvYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lm9iamVjdElEID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKFByb21pc2UucmVqZWN0KGNyZWF0ZU1pc3NpbmdPYmplY3RJREVycm9yKCkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2h1bmtlZEJhdGNoKGJhc2UpKG9iamVjdHMsIGFjdGlvbiwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzYXZlUnVsZSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJ1bGUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVSdWxlcyhiYXNlKShbcnVsZV0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVSdWxlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJ1bGVzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIGNsZWFyRXhpc3RpbmdSdWxlcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGVhckV4aXN0aW5nUnVsZXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmNsZWFyRXhpc3RpbmdSdWxlcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHJ1bGVzLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzYXZlU3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHN5bm9ueW0sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVTeW5vbnltcyhiYXNlKShbc3lub255bV0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVTeW5vbnltcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHN5bm9ueW1zLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIGNsZWFyRXhpc3RpbmdTeW5vbnltcywgcmVwbGFjZUV4aXN0aW5nU3lub255bXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVwbGFjZUV4aXN0aW5nU3lub255bXMgfHwgY2xlYXJFeGlzdGluZ1N5bm9ueW1zKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5yZXBsYWNlRXhpc3RpbmdTeW5vbnltcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc3lub255bXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHN5bm9ueW1zLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2ggPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChxdWVyeSwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3F1ZXJ5JywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaEZvckZhY2V0VmFsdWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZmFjZXROYW1lLCBmYWNldFF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvZmFjZXRzLyVzL3F1ZXJ5JywgYmFzZS5pbmRleE5hbWUsIGZhY2V0TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGZhY2V0UXVlcnksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hSdWxlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvc2VhcmNoJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hTeW5vbnltcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc3lub255bXMvc2VhcmNoJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZXRTZXR0aW5ncyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHNldHRpbmdzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUHV0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zZXR0aW5ncycsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YTogc2V0dGluZ3MsXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHdhaXRUYXNrID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodGFza0lELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVSZXRyeWFibGVQcm9taXNlKHJldHJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFRhc2soYmFzZSkodGFza0lELCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzICE9PSAncHVibGlzaGVkJyA/IHJldHJ5KCkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgQXBpS2V5QUNMRW51bSA9IHtcclxuICAgIEFkZE9iamVjdDogJ2FkZE9iamVjdCcsXHJcbiAgICBBbmFseXRpY3M6ICdhbmFseXRpY3MnLFxyXG4gICAgQnJvd3NlcjogJ2Jyb3dzZScsXHJcbiAgICBEZWxldGVJbmRleDogJ2RlbGV0ZUluZGV4JyxcclxuICAgIERlbGV0ZU9iamVjdDogJ2RlbGV0ZU9iamVjdCcsXHJcbiAgICBFZGl0U2V0dGluZ3M6ICdlZGl0U2V0dGluZ3MnLFxyXG4gICAgSW5mZXJlbmNlOiAnaW5mZXJlbmNlJyxcclxuICAgIExpc3RJbmRleGVzOiAnbGlzdEluZGV4ZXMnLFxyXG4gICAgTG9nczogJ2xvZ3MnLFxyXG4gICAgUGVyc29uYWxpemF0aW9uOiAncGVyc29uYWxpemF0aW9uJyxcclxuICAgIFJlY29tbWVuZGF0aW9uOiAncmVjb21tZW5kYXRpb24nLFxyXG4gICAgU2VhcmNoOiAnc2VhcmNoJyxcclxuICAgIFNlZVVucmV0cmlldmFibGVBdHRyaWJ1dGVzOiAnc2VlVW5yZXRyaWV2YWJsZUF0dHJpYnV0ZXMnLFxyXG4gICAgU2V0dGluZ3M6ICdzZXR0aW5ncycsXHJcbiAgICBVc2FnZTogJ3VzYWdlJyxcclxufTtcblxuY29uc3QgQmF0Y2hBY3Rpb25FbnVtID0ge1xyXG4gICAgQWRkT2JqZWN0OiAnYWRkT2JqZWN0JyxcclxuICAgIFVwZGF0ZU9iamVjdDogJ3VwZGF0ZU9iamVjdCcsXHJcbiAgICBQYXJ0aWFsVXBkYXRlT2JqZWN0OiAncGFydGlhbFVwZGF0ZU9iamVjdCcsXHJcbiAgICBQYXJ0aWFsVXBkYXRlT2JqZWN0Tm9DcmVhdGU6ICdwYXJ0aWFsVXBkYXRlT2JqZWN0Tm9DcmVhdGUnLFxyXG4gICAgRGVsZXRlT2JqZWN0OiAnZGVsZXRlT2JqZWN0JyxcclxuICAgIERlbGV0ZUluZGV4OiAnZGVsZXRlJyxcclxuICAgIENsZWFySW5kZXg6ICdjbGVhcicsXHJcbn07XG5cbmNvbnN0IFNjb3BlRW51bSA9IHtcclxuICAgIFNldHRpbmdzOiAnc2V0dGluZ3MnLFxyXG4gICAgU3lub255bXM6ICdzeW5vbnltcycsXHJcbiAgICBSdWxlczogJ3J1bGVzJyxcclxufTtcblxuY29uc3QgU3RyYXRlZ3lFbnVtID0ge1xyXG4gICAgTm9uZTogJ25vbmUnLFxyXG4gICAgU3RvcElmRW5vdWdoTWF0Y2hlczogJ3N0b3BJZkVub3VnaE1hdGNoZXMnLFxyXG59O1xuXG5jb25zdCBTeW5vbnltRW51bSA9IHtcclxuICAgIFN5bm9ueW06ICdzeW5vbnltJyxcclxuICAgIE9uZVdheVN5bm9ueW06ICdvbmVXYXlTeW5vbnltJyxcclxuICAgIEFsdENvcnJlY3Rpb24xOiAnYWx0Q29ycmVjdGlvbjEnLFxyXG4gICAgQWx0Q29ycmVjdGlvbjI6ICdhbHRDb3JyZWN0aW9uMicsXHJcbiAgICBQbGFjZWhvbGRlcjogJ3BsYWNlaG9sZGVyJyxcclxufTtcblxuZXhwb3J0IHsgQXBpS2V5QUNMRW51bSwgQmF0Y2hBY3Rpb25FbnVtLCBTY29wZUVudW0sIFN0cmF0ZWd5RW51bSwgU3lub255bUVudW0sIGFkZEFwaUtleSwgYXNzaWduVXNlcklELCBhc3NpZ25Vc2VySURzLCBiYXRjaCwgYnJvd3NlT2JqZWN0cywgYnJvd3NlUnVsZXMsIGJyb3dzZVN5bm9ueW1zLCBjaHVua2VkQmF0Y2gsIGNsZWFyRGljdGlvbmFyeUVudHJpZXMsIGNsZWFyT2JqZWN0cywgY2xlYXJSdWxlcywgY2xlYXJTeW5vbnltcywgY29weUluZGV4LCBjb3B5UnVsZXMsIGNvcHlTZXR0aW5ncywgY29weVN5bm9ueW1zLCBjcmVhdGVCcm93c2FibGVQcm9taXNlLCBjcmVhdGVNaXNzaW5nT2JqZWN0SURFcnJvciwgY3JlYXRlT2JqZWN0Tm90Rm91bmRFcnJvciwgY3JlYXRlU2VhcmNoQ2xpZW50LCBjcmVhdGVWYWxpZFVudGlsTm90Rm91bmRFcnJvciwgY3VzdG9tUmVxdWVzdCwgZGVsZXRlQXBpS2V5LCBkZWxldGVCeSwgZGVsZXRlRGljdGlvbmFyeUVudHJpZXMsIGRlbGV0ZUluZGV4LCBkZWxldGVPYmplY3QsIGRlbGV0ZU9iamVjdHMsIGRlbGV0ZVJ1bGUsIGRlbGV0ZVN5bm9ueW0sIGV4aXN0cywgZmluZEFuc3dlcnMsIGZpbmRPYmplY3QsIGdlbmVyYXRlU2VjdXJlZEFwaUtleSwgZ2V0QXBpS2V5LCBnZXRBcHBUYXNrLCBnZXREaWN0aW9uYXJ5U2V0dGluZ3MsIGdldExvZ3MsIGdldE9iamVjdCwgZ2V0T2JqZWN0UG9zaXRpb24sIGdldE9iamVjdHMsIGdldFJ1bGUsIGdldFNlY3VyZWRBcGlLZXlSZW1haW5pbmdWYWxpZGl0eSwgZ2V0U2V0dGluZ3MsIGdldFN5bm9ueW0sIGdldFRhc2ssIGdldFRvcFVzZXJJRHMsIGdldFVzZXJJRCwgaGFzUGVuZGluZ01hcHBpbmdzLCBpbml0SW5kZXgsIGxpc3RBcGlLZXlzLCBsaXN0Q2x1c3RlcnMsIGxpc3RJbmRpY2VzLCBsaXN0VXNlcklEcywgbW92ZUluZGV4LCBtdWx0aXBsZUJhdGNoLCBtdWx0aXBsZUdldE9iamVjdHMsIG11bHRpcGxlUXVlcmllcywgbXVsdGlwbGVTZWFyY2hGb3JGYWNldFZhbHVlcywgcGFydGlhbFVwZGF0ZU9iamVjdCwgcGFydGlhbFVwZGF0ZU9iamVjdHMsIHJlbW92ZVVzZXJJRCwgcmVwbGFjZUFsbE9iamVjdHMsIHJlcGxhY2VBbGxSdWxlcywgcmVwbGFjZUFsbFN5bm9ueW1zLCByZXBsYWNlRGljdGlvbmFyeUVudHJpZXMsIHJlc3RvcmVBcGlLZXksIHNhdmVEaWN0aW9uYXJ5RW50cmllcywgc2F2ZU9iamVjdCwgc2F2ZU9iamVjdHMsIHNhdmVSdWxlLCBzYXZlUnVsZXMsIHNhdmVTeW5vbnltLCBzYXZlU3lub255bXMsIHNlYXJjaCwgc2VhcmNoRGljdGlvbmFyeUVudHJpZXMsIHNlYXJjaEZvckZhY2V0VmFsdWVzLCBzZWFyY2hSdWxlcywgc2VhcmNoU3lub255bXMsIHNlYXJjaFVzZXJJRHMsIHNldERpY3Rpb25hcnlTZXR0aW5ncywgc2V0U2V0dGluZ3MsIHVwZGF0ZUFwaUtleSwgd2FpdEFwcFRhc2ssIHdhaXRUYXNrIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-search/dist/client-search.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/events/events.js":
/*!************************************************!*\
  !*** ./node_modules/@algolia/events/events.js ***!
  \************************************************/
/***/ ((module) => {

eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\n// EventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvZXZlbnRzL2V2ZW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoLWV4cGxvcmVyLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL2V2ZW50cy9ldmVudHMuanM/YjUyYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG4vLyBFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/events/events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/logger-common/dist/logger-common.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@algolia/logger-common/dist/logger-common.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevelEnum: () => (/* binding */ LogLevelEnum),\n/* harmony export */   createNullLogger: () => (/* binding */ createNullLogger)\n/* harmony export */ });\nfunction createNullLogger() {\r\n    return {\r\n        debug(_message, _args) {\r\n            return Promise.resolve();\r\n        },\r\n        info(_message, _args) {\r\n            return Promise.resolve();\r\n        },\r\n        error(_message, _args) {\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\nconst LogLevelEnum = {\r\n    Debug: 1,\r\n    Info: 2,\r\n    Error: 3,\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvbG9nZ2VyLWNvbW1vbi9kaXN0L2xvZ2dlci1jb21tb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGgtZXhwbG9yZXIvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvbG9nZ2VyLWNvbW1vbi9kaXN0L2xvZ2dlci1jb21tb24uZXNtLmpzPzIxYzIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY3JlYXRlTnVsbExvZ2dlcigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGVidWcoX21lc3NhZ2UsIF9hcmdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluZm8oX21lc3NhZ2UsIF9hcmdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yKF9tZXNzYWdlLCBfYXJncykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cblxuY29uc3QgTG9nTGV2ZWxFbnVtID0ge1xyXG4gICAgRGVidWc6IDEsXHJcbiAgICBJbmZvOiAyLFxyXG4gICAgRXJyb3I6IDMsXHJcbn07XG5cbmV4cG9ydCB7IExvZ0xldmVsRW51bSwgY3JlYXRlTnVsbExvZ2dlciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/logger-common/dist/logger-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/recommend/dist/recommend.cjs.js":
/*!***************************************************************!*\
  !*** ./node_modules/@algolia/recommend/dist/recommend.cjs.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar cacheCommon = __webpack_require__(/*! @algolia/cache-common */ \"(ssr)/./node_modules/@algolia/cache-common/dist/cache-common.esm.js\");\nvar cacheInMemory = __webpack_require__(/*! @algolia/cache-in-memory */ \"(ssr)/./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js\");\nvar clientCommon = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\nvar loggerCommon = __webpack_require__(/*! @algolia/logger-common */ \"(ssr)/./node_modules/@algolia/logger-common/dist/logger-common.esm.js\");\nvar requesterNodeHttp = __webpack_require__(/*! @algolia/requester-node-http */ \"(ssr)/./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js\");\nvar transporter = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\nvar requesterCommon = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\nconst createRecommendClient = options => {\r\n    const appId = options.appId;\r\n    const auth = clientCommon.createAuth(options.authMode !== undefined ? options.authMode : clientCommon.AuthMode.WithinHeaders, appId, options.apiKey);\r\n    const transporter$1 = transporter.createTransporter({\r\n        hosts: [\r\n            { url: `${appId}-dsn.algolia.net`, accept: transporter.CallEnum.Read },\r\n            { url: `${appId}.algolia.net`, accept: transporter.CallEnum.Write },\r\n        ].concat(clientCommon.shuffle([\r\n            { url: `${appId}-1.algolianet.com` },\r\n            { url: `${appId}-2.algolianet.com` },\r\n            { url: `${appId}-3.algolianet.com` },\r\n        ])),\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/x-www-form-urlencoded' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const base = {\r\n        transporter: transporter$1,\r\n        appId,\r\n        addAlgoliaAgent(segment, version) {\r\n            transporter$1.userAgent.add({ segment, version });\r\n        },\r\n        clearCache() {\r\n            return Promise.all([\r\n                transporter$1.requestsCache.clear(),\r\n                transporter$1.responsesCache.clear(),\r\n            ]).then(() => undefined);\r\n        },\r\n    };\r\n    return clientCommon.addMethods(base, options.methods);\r\n};\n\nconst getRecommendations = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            // The `threshold` param is required by the endpoint to make it easier\r\n            // to provide a default value later, so we default it in the client\r\n            // so that users don't have to provide a value.\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getFrequentlyBoughtTogether = base => {\r\n    return (queries, requestOptions) => {\r\n        return getRecommendations(base)(queries.map(query => ({\r\n            ...query,\r\n            fallbackParameters: {},\r\n            model: 'bought-together',\r\n        })), requestOptions);\r\n    };\r\n};\n\nconst getRelatedProducts = base => {\r\n    return (queries, requestOptions) => {\r\n        return getRecommendations(base)(queries.map(query => ({\r\n            ...query,\r\n            model: 'related-products',\r\n        })), requestOptions);\r\n    };\r\n};\n\nconst getTrendingFacets = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            model: 'trending-facets',\r\n            // The `threshold` param is required by the endpoint to make it easier\r\n            // to provide a default value later, so we default it in the client\r\n            // so that users don't have to provide a value.\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getTrendingItems = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            model: 'trending-items',\r\n            // The `threshold` param is required by the endpoint to make it easier\r\n            // to provide a default value later, so we default it in the client\r\n            // so that users don't have to provide a value.\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getLookingSimilar = base => {\r\n    return (queries, requestOptions) => {\r\n        return getRecommendations(base)(queries.map(query => ({\r\n            ...query,\r\n            model: 'looking-similar',\r\n        })), requestOptions);\r\n    };\r\n};\n\nconst getRecommendedForYou = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            model: 'recommended-for-you',\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nfunction recommend(appId, apiKey, options) {\r\n    const commonOptions = {\r\n        appId,\r\n        apiKey,\r\n        timeouts: {\r\n            connect: 2,\r\n            read: 5,\r\n            write: 30,\r\n        },\r\n        requester: requesterNodeHttp.createNodeHttpRequester(),\r\n        logger: loggerCommon.createNullLogger(),\r\n        responsesCache: cacheCommon.createNullCache(),\r\n        requestsCache: cacheCommon.createNullCache(),\r\n        hostsCache: cacheInMemory.createInMemoryCache(),\r\n        userAgent: transporter.createUserAgent(clientCommon.version)\r\n            .add({ segment: 'Recommend', version: clientCommon.version })\r\n            .add({ segment: 'Node.js', version: process.versions.node }),\r\n    };\r\n    return createRecommendClient({\r\n        ...commonOptions,\r\n        ...options,\r\n        methods: {\r\n            destroy: clientCommon.destroy,\r\n            getFrequentlyBoughtTogether,\r\n            getRecommendations,\r\n            getRelatedProducts,\r\n            getTrendingFacets,\r\n            getTrendingItems,\r\n            getLookingSimilar,\r\n            getRecommendedForYou,\r\n        },\r\n    });\r\n}\r\n/* eslint-disable functional/immutable-data */\r\nrecommend.version = clientCommon.version;\r\nrecommend.getFrequentlyBoughtTogether = getFrequentlyBoughtTogether;\r\nrecommend.getRecommendations = getRecommendations;\r\nrecommend.getRelatedProducts = getRelatedProducts;\r\nrecommend.getTrendingFacets = getTrendingFacets;\r\nrecommend.getTrendingItems = getTrendingItems;\r\nrecommend.getLookingSimilar = getLookingSimilar;\r\nrecommend.getRecommendedForYou = getRecommendedForYou;\n\nmodule.exports = recommend;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVjb21tZW5kL2Rpc3QvcmVjb21tZW5kLmNqcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0IsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDakQsb0JBQW9CLG1CQUFPLENBQUMsMkdBQTBCO0FBQ3RELG1CQUFtQixtQkFBTyxDQUFDLHFHQUF3QjtBQUNuRCxtQkFBbUIsbUJBQU8sQ0FBQyxxR0FBd0I7QUFDbkQsd0JBQXdCLG1CQUFPLENBQUMsdUhBQThCO0FBQzlELGtCQUFrQixtQkFBTyxDQUFDLCtGQUFzQjtBQUNoRCxzQkFBc0IsbUJBQU8sQ0FBQyw4R0FBMkI7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVEsTUFBTSxzREFBc0Q7QUFDbEYsY0FBYyxRQUFRLE1BQU0sbURBQW1EO0FBQy9FO0FBQ0EsY0FBYyxRQUFRLE1BQU0sb0JBQW9CO0FBQ2hELGNBQWMsUUFBUSxNQUFNLG9CQUFvQjtBQUNoRCxjQUFjLFFBQVEsTUFBTSxvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscURBQXFEO0FBQ3RFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsa0JBQWtCO0FBQzVELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscURBQXFEO0FBQ3hFLG1CQUFtQixvREFBb0Q7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoLWV4cGxvcmVyLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL3JlY29tbWVuZC9kaXN0L3JlY29tbWVuZC5janMuanM/MWRiNiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBjYWNoZUNvbW1vbiA9IHJlcXVpcmUoJ0BhbGdvbGlhL2NhY2hlLWNvbW1vbicpO1xudmFyIGNhY2hlSW5NZW1vcnkgPSByZXF1aXJlKCdAYWxnb2xpYS9jYWNoZS1pbi1tZW1vcnknKTtcbnZhciBjbGllbnRDb21tb24gPSByZXF1aXJlKCdAYWxnb2xpYS9jbGllbnQtY29tbW9uJyk7XG52YXIgbG9nZ2VyQ29tbW9uID0gcmVxdWlyZSgnQGFsZ29saWEvbG9nZ2VyLWNvbW1vbicpO1xudmFyIHJlcXVlc3Rlck5vZGVIdHRwID0gcmVxdWlyZSgnQGFsZ29saWEvcmVxdWVzdGVyLW5vZGUtaHR0cCcpO1xudmFyIHRyYW5zcG9ydGVyID0gcmVxdWlyZSgnQGFsZ29saWEvdHJhbnNwb3J0ZXInKTtcbnZhciByZXF1ZXN0ZXJDb21tb24gPSByZXF1aXJlKCdAYWxnb2xpYS9yZXF1ZXN0ZXItY29tbW9uJyk7XG5cbmNvbnN0IGNyZWF0ZVJlY29tbWVuZENsaWVudCA9IG9wdGlvbnMgPT4ge1xyXG4gICAgY29uc3QgYXBwSWQgPSBvcHRpb25zLmFwcElkO1xyXG4gICAgY29uc3QgYXV0aCA9IGNsaWVudENvbW1vbi5jcmVhdGVBdXRoKG9wdGlvbnMuYXV0aE1vZGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXV0aE1vZGUgOiBjbGllbnRDb21tb24uQXV0aE1vZGUuV2l0aGluSGVhZGVycywgYXBwSWQsIG9wdGlvbnMuYXBpS2V5KTtcclxuICAgIGNvbnN0IHRyYW5zcG9ydGVyJDEgPSB0cmFuc3BvcnRlci5jcmVhdGVUcmFuc3BvcnRlcih7XHJcbiAgICAgICAgaG9zdHM6IFtcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS1kc24uYWxnb2xpYS5uZXRgLCBhY2NlcHQ6IHRyYW5zcG9ydGVyLkNhbGxFbnVtLlJlYWQgfSxcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS5hbGdvbGlhLm5ldGAsIGFjY2VwdDogdHJhbnNwb3J0ZXIuQ2FsbEVudW0uV3JpdGUgfSxcclxuICAgICAgICBdLmNvbmNhdChjbGllbnRDb21tb24uc2h1ZmZsZShbXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0tMS5hbGdvbGlhbmV0LmNvbWAgfSxcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS0yLmFsZ29saWFuZXQuY29tYCB9LFxyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LTMuYWxnb2xpYW5ldC5jb21gIH0sXHJcbiAgICAgICAgXSkpLFxyXG4gICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLmhlYWRlcnMoKSxcclxuICAgICAgICAgICAgLi4ueyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgICAgIC4uLmF1dGgucXVlcnlQYXJhbWV0ZXJzKCksXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGJhc2UgPSB7XHJcbiAgICAgICAgdHJhbnNwb3J0ZXI6IHRyYW5zcG9ydGVyJDEsXHJcbiAgICAgICAgYXBwSWQsXHJcbiAgICAgICAgYWRkQWxnb2xpYUFnZW50KHNlZ21lbnQsIHZlcnNpb24pIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0ZXIkMS51c2VyQWdlbnQuYWRkKHsgc2VnbWVudCwgdmVyc2lvbiB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsZWFyQ2FjaGUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRlciQxLnJlcXVlc3RzQ2FjaGUuY2xlYXIoKSxcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyJDEucmVzcG9uc2VzQ2FjaGUuY2xlYXIoKSxcclxuICAgICAgICAgICAgXSkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsaWVudENvbW1vbi5hZGRNZXRob2RzKGJhc2UsIG9wdGlvbnMubWV0aG9kcyk7XHJcbn07XG5cbmNvbnN0IGdldFJlY29tbWVuZGF0aW9ucyA9IGJhc2UgPT4ge1xyXG4gICAgcmV0dXJuIChxdWVyaWVzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RzID0gcXVlcmllcy5tYXAocXVlcnkgPT4gKHtcclxuICAgICAgICAgICAgLi4ucXVlcnksXHJcbiAgICAgICAgICAgIC8vIFRoZSBgdGhyZXNob2xkYCBwYXJhbSBpcyByZXF1aXJlZCBieSB0aGUgZW5kcG9pbnQgdG8gbWFrZSBpdCBlYXNpZXJcclxuICAgICAgICAgICAgLy8gdG8gcHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUgbGF0ZXIsIHNvIHdlIGRlZmF1bHQgaXQgaW4gdGhlIGNsaWVudFxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHVzZXJzIGRvbid0IGhhdmUgdG8gcHJvdmlkZSBhIHZhbHVlLlxyXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHF1ZXJ5LnRocmVzaG9sZCB8fCAwLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0ZXJDb21tb24uTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9pbmRleGVzLyovcmVjb21tZW5kYXRpb25zJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRGcmVxdWVudGx5Qm91Z2h0VG9nZXRoZXIgPSBiYXNlID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gZ2V0UmVjb21tZW5kYXRpb25zKGJhc2UpKHF1ZXJpZXMubWFwKHF1ZXJ5ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICBmYWxsYmFja1BhcmFtZXRlcnM6IHt9LFxyXG4gICAgICAgICAgICBtb2RlbDogJ2JvdWdodC10b2dldGhlcicsXHJcbiAgICAgICAgfSkpLCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRSZWxhdGVkUHJvZHVjdHMgPSBiYXNlID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gZ2V0UmVjb21tZW5kYXRpb25zKGJhc2UpKHF1ZXJpZXMubWFwKHF1ZXJ5ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICBtb2RlbDogJ3JlbGF0ZWQtcHJvZHVjdHMnLFxyXG4gICAgICAgIH0pKSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VHJlbmRpbmdGYWNldHMgPSBiYXNlID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHF1ZXJpZXMubWFwKHF1ZXJ5ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICBtb2RlbDogJ3RyZW5kaW5nLWZhY2V0cycsXHJcbiAgICAgICAgICAgIC8vIFRoZSBgdGhyZXNob2xkYCBwYXJhbSBpcyByZXF1aXJlZCBieSB0aGUgZW5kcG9pbnQgdG8gbWFrZSBpdCBlYXNpZXJcclxuICAgICAgICAgICAgLy8gdG8gcHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUgbGF0ZXIsIHNvIHdlIGRlZmF1bHQgaXQgaW4gdGhlIGNsaWVudFxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHVzZXJzIGRvbid0IGhhdmUgdG8gcHJvdmlkZSBhIHZhbHVlLlxyXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHF1ZXJ5LnRocmVzaG9sZCB8fCAwLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0ZXJDb21tb24uTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9pbmRleGVzLyovcmVjb21tZW5kYXRpb25zJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRUcmVuZGluZ0l0ZW1zID0gYmFzZSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBxdWVyaWVzLm1hcChxdWVyeSA9PiAoe1xyXG4gICAgICAgICAgICAuLi5xdWVyeSxcclxuICAgICAgICAgICAgbW9kZWw6ICd0cmVuZGluZy1pdGVtcycsXHJcbiAgICAgICAgICAgIC8vIFRoZSBgdGhyZXNob2xkYCBwYXJhbSBpcyByZXF1aXJlZCBieSB0aGUgZW5kcG9pbnQgdG8gbWFrZSBpdCBlYXNpZXJcclxuICAgICAgICAgICAgLy8gdG8gcHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUgbGF0ZXIsIHNvIHdlIGRlZmF1bHQgaXQgaW4gdGhlIGNsaWVudFxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHVzZXJzIGRvbid0IGhhdmUgdG8gcHJvdmlkZSBhIHZhbHVlLlxyXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHF1ZXJ5LnRocmVzaG9sZCB8fCAwLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0ZXJDb21tb24uTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9pbmRleGVzLyovcmVjb21tZW5kYXRpb25zJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRMb29raW5nU2ltaWxhciA9IGJhc2UgPT4ge1xyXG4gICAgcmV0dXJuIChxdWVyaWVzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBnZXRSZWNvbW1lbmRhdGlvbnMoYmFzZSkocXVlcmllcy5tYXAocXVlcnkgPT4gKHtcclxuICAgICAgICAgICAgLi4ucXVlcnksXHJcbiAgICAgICAgICAgIG1vZGVsOiAnbG9va2luZy1zaW1pbGFyJyxcclxuICAgICAgICB9KSksIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFJlY29tbWVuZGVkRm9yWW91ID0gYmFzZSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBxdWVyaWVzLm1hcChxdWVyeSA9PiAoe1xyXG4gICAgICAgICAgICAuLi5xdWVyeSxcclxuICAgICAgICAgICAgbW9kZWw6ICdyZWNvbW1lbmRlZC1mb3IteW91JyxcclxuICAgICAgICAgICAgdGhyZXNob2xkOiBxdWVyeS50aHJlc2hvbGQgfHwgMCxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdGVyQ29tbW9uLk1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL3JlY29tbWVuZGF0aW9ucycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWNoZWFibGU6IHRydWUsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuZnVuY3Rpb24gcmVjb21tZW5kKGFwcElkLCBhcGlLZXksIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGNvbW1vbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgYXBwSWQsXHJcbiAgICAgICAgYXBpS2V5LFxyXG4gICAgICAgIHRpbWVvdXRzOiB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Q6IDIsXHJcbiAgICAgICAgICAgIHJlYWQ6IDUsXHJcbiAgICAgICAgICAgIHdyaXRlOiAzMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVlc3RlcjogcmVxdWVzdGVyTm9kZUh0dHAuY3JlYXRlTm9kZUh0dHBSZXF1ZXN0ZXIoKSxcclxuICAgICAgICBsb2dnZXI6IGxvZ2dlckNvbW1vbi5jcmVhdGVOdWxsTG9nZ2VyKCksXHJcbiAgICAgICAgcmVzcG9uc2VzQ2FjaGU6IGNhY2hlQ29tbW9uLmNyZWF0ZU51bGxDYWNoZSgpLFxyXG4gICAgICAgIHJlcXVlc3RzQ2FjaGU6IGNhY2hlQ29tbW9uLmNyZWF0ZU51bGxDYWNoZSgpLFxyXG4gICAgICAgIGhvc3RzQ2FjaGU6IGNhY2hlSW5NZW1vcnkuY3JlYXRlSW5NZW1vcnlDYWNoZSgpLFxyXG4gICAgICAgIHVzZXJBZ2VudDogdHJhbnNwb3J0ZXIuY3JlYXRlVXNlckFnZW50KGNsaWVudENvbW1vbi52ZXJzaW9uKVxyXG4gICAgICAgICAgICAuYWRkKHsgc2VnbWVudDogJ1JlY29tbWVuZCcsIHZlcnNpb246IGNsaWVudENvbW1vbi52ZXJzaW9uIH0pXHJcbiAgICAgICAgICAgIC5hZGQoeyBzZWdtZW50OiAnTm9kZS5qcycsIHZlcnNpb246IHByb2Nlc3MudmVyc2lvbnMubm9kZSB9KSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gY3JlYXRlUmVjb21tZW5kQ2xpZW50KHtcclxuICAgICAgICAuLi5jb21tb25PcHRpb25zLFxyXG4gICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgICBkZXN0cm95OiBjbGllbnRDb21tb24uZGVzdHJveSxcclxuICAgICAgICAgICAgZ2V0RnJlcXVlbnRseUJvdWdodFRvZ2V0aGVyLFxyXG4gICAgICAgICAgICBnZXRSZWNvbW1lbmRhdGlvbnMsXHJcbiAgICAgICAgICAgIGdldFJlbGF0ZWRQcm9kdWN0cyxcclxuICAgICAgICAgICAgZ2V0VHJlbmRpbmdGYWNldHMsXHJcbiAgICAgICAgICAgIGdldFRyZW5kaW5nSXRlbXMsXHJcbiAgICAgICAgICAgIGdldExvb2tpbmdTaW1pbGFyLFxyXG4gICAgICAgICAgICBnZXRSZWNvbW1lbmRlZEZvcllvdSxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbn1cclxuLyogZXNsaW50LWRpc2FibGUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YSAqL1xyXG5yZWNvbW1lbmQudmVyc2lvbiA9IGNsaWVudENvbW1vbi52ZXJzaW9uO1xyXG5yZWNvbW1lbmQuZ2V0RnJlcXVlbnRseUJvdWdodFRvZ2V0aGVyID0gZ2V0RnJlcXVlbnRseUJvdWdodFRvZ2V0aGVyO1xyXG5yZWNvbW1lbmQuZ2V0UmVjb21tZW5kYXRpb25zID0gZ2V0UmVjb21tZW5kYXRpb25zO1xyXG5yZWNvbW1lbmQuZ2V0UmVsYXRlZFByb2R1Y3RzID0gZ2V0UmVsYXRlZFByb2R1Y3RzO1xyXG5yZWNvbW1lbmQuZ2V0VHJlbmRpbmdGYWNldHMgPSBnZXRUcmVuZGluZ0ZhY2V0cztcclxucmVjb21tZW5kLmdldFRyZW5kaW5nSXRlbXMgPSBnZXRUcmVuZGluZ0l0ZW1zO1xyXG5yZWNvbW1lbmQuZ2V0TG9va2luZ1NpbWlsYXIgPSBnZXRMb29raW5nU2ltaWxhcjtcclxucmVjb21tZW5kLmdldFJlY29tbWVuZGVkRm9yWW91ID0gZ2V0UmVjb21tZW5kZWRGb3JZb3U7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVjb21tZW5kO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/recommend/dist/recommend.cjs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/recommend/index.js":
/*!**************************************************!*\
  !*** ./node_modules/@algolia/recommend/index.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* eslint-disable functional/immutable-data, import/no-commonjs */\nconst recommend = __webpack_require__(/*! ./dist/recommend.cjs.js */ \"(ssr)/./node_modules/@algolia/recommend/dist/recommend.cjs.js\");\n\n/**\n * The Common JS build is the default entry point for the Node environment. Keep in\n * in mind, that for the browser environment, we hint the bundler to use the UMD\n * build instead as specified on the key `browser` of our `package.json` file.\n */\nmodule.exports = recommend;\n\n/**\n * In addition, we also set explicitly the default export below making\n * this Common JS module in compliance with es6 modules specification.\n */\nmodule.exports[\"default\"] = recommend;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVjb21tZW5kL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esa0JBQWtCLG1CQUFPLENBQUMsOEZBQXlCOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGgtZXhwbG9yZXIvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVjb21tZW5kL2luZGV4LmpzPzZmOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YSwgaW1wb3J0L25vLWNvbW1vbmpzICovXG5jb25zdCByZWNvbW1lbmQgPSByZXF1aXJlKCcuL2Rpc3QvcmVjb21tZW5kLmNqcy5qcycpO1xuXG4vKipcbiAqIFRoZSBDb21tb24gSlMgYnVpbGQgaXMgdGhlIGRlZmF1bHQgZW50cnkgcG9pbnQgZm9yIHRoZSBOb2RlIGVudmlyb25tZW50LiBLZWVwIGluXG4gKiBpbiBtaW5kLCB0aGF0IGZvciB0aGUgYnJvd3NlciBlbnZpcm9ubWVudCwgd2UgaGludCB0aGUgYnVuZGxlciB0byB1c2UgdGhlIFVNRFxuICogYnVpbGQgaW5zdGVhZCBhcyBzcGVjaWZpZWQgb24gdGhlIGtleSBgYnJvd3NlcmAgb2Ygb3VyIGBwYWNrYWdlLmpzb25gIGZpbGUuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gcmVjb21tZW5kO1xuXG4vKipcbiAqIEluIGFkZGl0aW9uLCB3ZSBhbHNvIHNldCBleHBsaWNpdGx5IHRoZSBkZWZhdWx0IGV4cG9ydCBiZWxvdyBtYWtpbmdcbiAqIHRoaXMgQ29tbW9uIEpTIG1vZHVsZSBpbiBjb21wbGlhbmNlIHdpdGggZXM2IG1vZHVsZXMgc3BlY2lmaWNhdGlvbi5cbiAqL1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IHJlY29tbWVuZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/recommend/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@algolia/requester-common/dist/requester-common.esm.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MethodEnum: () => (/* binding */ MethodEnum)\n/* harmony export */ });\nconst MethodEnum = {\r\n    Delete: 'DELETE',\r\n    Get: 'GET',\r\n    Post: 'POST',\r\n    Put: 'PUT',\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbi9kaXN0L3JlcXVlc3Rlci1jb21tb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoLWV4cGxvcmVyLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL3JlcXVlc3Rlci1jb21tb24vZGlzdC9yZXF1ZXN0ZXItY29tbW9uLmVzbS5qcz85NjdkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1ldGhvZEVudW0gPSB7XHJcbiAgICBEZWxldGU6ICdERUxFVEUnLFxyXG4gICAgR2V0OiAnR0VUJyxcclxuICAgIFBvc3Q6ICdQT1NUJyxcclxuICAgIFB1dDogJ1BVVCcsXHJcbn07XG5cbmV4cG9ydCB7IE1ldGhvZEVudW0gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNodeHttpRequester: () => (/* binding */ createNodeHttpRequester)\n/* harmony export */ });\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\n\n/* eslint functional/prefer-readonly-type: 0 */\r\nconst agentOptions = { keepAlive: true };\r\nconst defaultHttpAgent = new http__WEBPACK_IMPORTED_MODULE_0__.Agent(agentOptions);\r\nconst defaultHttpsAgent = new https__WEBPACK_IMPORTED_MODULE_1__.Agent(agentOptions);\r\nfunction createNodeHttpRequester({ agent: userGlobalAgent, httpAgent: userHttpAgent, httpsAgent: userHttpsAgent, requesterOptions = {}, } = {}) {\r\n    const httpAgent = userHttpAgent || userGlobalAgent || defaultHttpAgent;\r\n    const httpsAgent = userHttpsAgent || userGlobalAgent || defaultHttpsAgent;\r\n    return {\r\n        send(request) {\r\n            return new Promise(resolve => {\r\n                const url = (0,url__WEBPACK_IMPORTED_MODULE_2__.parse)(request.url);\r\n                const path = url.query === null ? url.pathname : `${url.pathname}?${url.query}`;\r\n                const options = {\r\n                    ...requesterOptions,\r\n                    agent: url.protocol === 'https:' ? httpsAgent : httpAgent,\r\n                    hostname: url.hostname,\r\n                    path,\r\n                    method: request.method,\r\n                    headers: {\r\n                        ...(requesterOptions && requesterOptions.headers ? requesterOptions.headers : {}),\r\n                        ...request.headers,\r\n                    },\r\n                    ...(url.port !== undefined ? { port: url.port || '' } : {}),\r\n                };\r\n                const req = (url.protocol === 'https:' ? https__WEBPACK_IMPORTED_MODULE_1__ : http__WEBPACK_IMPORTED_MODULE_0__).request(options, response => {\r\n                    // eslint-disable-next-line functional/no-let\r\n                    let contentBuffers = [];\r\n                    response.on('data', chunk => {\r\n                        contentBuffers = contentBuffers.concat(chunk);\r\n                    });\r\n                    response.on('end', () => {\r\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n                        clearTimeout(connectTimeout);\r\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n                        clearTimeout(responseTimeout);\r\n                        resolve({\r\n                            status: response.statusCode || 0,\r\n                            content: Buffer.concat(contentBuffers).toString(),\r\n                            isTimedOut: false,\r\n                        });\r\n                    });\r\n                });\r\n                const createTimeout = (timeout, content) => {\r\n                    return setTimeout(() => {\r\n                        req.abort();\r\n                        resolve({\r\n                            status: 0,\r\n                            content,\r\n                            isTimedOut: true,\r\n                        });\r\n                    }, timeout * 1000);\r\n                };\r\n                const connectTimeout = createTimeout(request.connectTimeout, 'Connection timeout');\r\n                // eslint-disable-next-line functional/no-let\r\n                let responseTimeout;\r\n                req.on('error', error => {\r\n                    clearTimeout(connectTimeout);\r\n                    clearTimeout(responseTimeout);\r\n                    resolve({ status: 0, content: error.message, isTimedOut: false });\r\n                });\r\n                req.once('response', () => {\r\n                    clearTimeout(connectTimeout);\r\n                    responseTimeout = createTimeout(request.responseTimeout, 'Socket timeout');\r\n                });\r\n                if (request.data !== undefined) {\r\n                    req.write(request.data);\r\n                }\r\n                req.end();\r\n            });\r\n        },\r\n        destroy() {\r\n            httpAgent.destroy();\r\n            httpsAgent.destroy();\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVxdWVzdGVyLW5vZGUtaHR0cC9kaXN0L3JlcXVlc3Rlci1ub2RlLWh0dHAuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNkI7QUFDQTtBQUNFO0FBQ1U7QUFDYjs7QUFFNUI7QUFDQSx1QkFBdUI7QUFDdkIsNkJBQTZCLHVDQUFLO0FBQ2xDLDhCQUE4Qix3Q0FBTztBQUNyQyxtQ0FBbUMsbUdBQW1HLElBQUksSUFBSTtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBDQUFLO0FBQ2pDLG9FQUFvRSxhQUFhLEdBQUcsVUFBVTtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdHQUF3RztBQUN4RztBQUNBLHFCQUFxQjtBQUNyQixtREFBbUQsdUJBQXVCLElBQUk7QUFDOUU7QUFDQSx5REFBeUQsa0NBQUssR0FBRyxpQ0FBSTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0RBQXNEO0FBQ3BGLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoLWV4cGxvcmVyLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL3JlcXVlc3Rlci1ub2RlLWh0dHAvZGlzdC9yZXF1ZXN0ZXItbm9kZS1odHRwLmVzbS5qcz85YTU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGh0dHAgZnJvbSAnaHR0cCc7XG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0ICogYXMgaHR0cHMgZnJvbSAnaHR0cHMnO1xuaW1wb3J0IHsgQWdlbnQgYXMgQWdlbnQkMSB9IGZyb20gJ2h0dHBzJztcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAndXJsJztcblxuLyogZXNsaW50IGZ1bmN0aW9uYWwvcHJlZmVyLXJlYWRvbmx5LXR5cGU6IDAgKi9cclxuY29uc3QgYWdlbnRPcHRpb25zID0geyBrZWVwQWxpdmU6IHRydWUgfTtcclxuY29uc3QgZGVmYXVsdEh0dHBBZ2VudCA9IG5ldyBBZ2VudChhZ2VudE9wdGlvbnMpO1xyXG5jb25zdCBkZWZhdWx0SHR0cHNBZ2VudCA9IG5ldyBBZ2VudCQxKGFnZW50T3B0aW9ucyk7XHJcbmZ1bmN0aW9uIGNyZWF0ZU5vZGVIdHRwUmVxdWVzdGVyKHsgYWdlbnQ6IHVzZXJHbG9iYWxBZ2VudCwgaHR0cEFnZW50OiB1c2VySHR0cEFnZW50LCBodHRwc0FnZW50OiB1c2VySHR0cHNBZ2VudCwgcmVxdWVzdGVyT3B0aW9ucyA9IHt9LCB9ID0ge30pIHtcclxuICAgIGNvbnN0IGh0dHBBZ2VudCA9IHVzZXJIdHRwQWdlbnQgfHwgdXNlckdsb2JhbEFnZW50IHx8IGRlZmF1bHRIdHRwQWdlbnQ7XHJcbiAgICBjb25zdCBodHRwc0FnZW50ID0gdXNlckh0dHBzQWdlbnQgfHwgdXNlckdsb2JhbEFnZW50IHx8IGRlZmF1bHRIdHRwc0FnZW50O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzZW5kKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gcGFyc2UocmVxdWVzdC51cmwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IHVybC5xdWVyeSA9PT0gbnVsbCA/IHVybC5wYXRobmFtZSA6IGAke3VybC5wYXRobmFtZX0/JHt1cmwucXVlcnl9YDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVxdWVzdGVyT3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBhZ2VudDogdXJsLnByb3RvY29sID09PSAnaHR0cHM6JyA/IGh0dHBzQWdlbnQgOiBodHRwQWdlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdG5hbWU6IHVybC5ob3N0bmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4ocmVxdWVzdGVyT3B0aW9ucyAmJiByZXF1ZXN0ZXJPcHRpb25zLmhlYWRlcnMgPyByZXF1ZXN0ZXJPcHRpb25zLmhlYWRlcnMgOiB7fSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlcXVlc3QuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLih1cmwucG9ydCAhPT0gdW5kZWZpbmVkID8geyBwb3J0OiB1cmwucG9ydCB8fCAnJyB9IDoge30pLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9ICh1cmwucHJvdG9jb2wgPT09ICdodHRwczonID8gaHR0cHMgOiBodHRwKS5yZXF1ZXN0KG9wdGlvbnMsIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudEJ1ZmZlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5vbignZGF0YScsIGNodW5rID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEJ1ZmZlcnMgPSBjb250ZW50QnVmZmVycy5jb25jYXQoY2h1bmspO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLm9uKCdlbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVzcG9uc2VUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1c0NvZGUgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IEJ1ZmZlci5jb25jYXQoY29udGVudEJ1ZmZlcnMpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RpbWVkT3V0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNyZWF0ZVRpbWVvdXQgPSAodGltZW91dCwgY29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVGltZWRPdXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQgKiAxMDAwKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0VGltZW91dCA9IGNyZWF0ZVRpbWVvdXQocmVxdWVzdC5jb25uZWN0VGltZW91dCwgJ0Nvbm5lY3Rpb24gdGltZW91dCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VUaW1lb3V0O1xyXG4gICAgICAgICAgICAgICAgcmVxLm9uKCdlcnJvcicsIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29ubmVjdFRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyZXNwb25zZVRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyBzdGF0dXM6IDAsIGNvbnRlbnQ6IGVycm9yLm1lc3NhZ2UsIGlzVGltZWRPdXQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXEub25jZSgncmVzcG9uc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVRpbWVvdXQgPSBjcmVhdGVUaW1lb3V0KHJlcXVlc3QucmVzcG9uc2VUaW1lb3V0LCAnU29ja2V0IHRpbWVvdXQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxLndyaXRlKHJlcXVlc3QuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXEuZW5kKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveSgpIHtcclxuICAgICAgICAgICAgaHR0cEFnZW50LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgaHR0cHNBZ2VudC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxuXG5leHBvcnQgeyBjcmVhdGVOb2RlSHR0cFJlcXVlc3RlciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@algolia/transporter/dist/transporter.esm.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CallEnum: () => (/* binding */ CallEnum),\n/* harmony export */   HostStatusEnum: () => (/* binding */ HostStatusEnum),\n/* harmony export */   createApiError: () => (/* binding */ createApiError),\n/* harmony export */   createDeserializationError: () => (/* binding */ createDeserializationError),\n/* harmony export */   createMappedRequestOptions: () => (/* binding */ createMappedRequestOptions),\n/* harmony export */   createRetryError: () => (/* binding */ createRetryError),\n/* harmony export */   createStatefulHost: () => (/* binding */ createStatefulHost),\n/* harmony export */   createStatelessHost: () => (/* binding */ createStatelessHost),\n/* harmony export */   createTransporter: () => (/* binding */ createTransporter),\n/* harmony export */   createUserAgent: () => (/* binding */ createUserAgent),\n/* harmony export */   deserializeFailure: () => (/* binding */ deserializeFailure),\n/* harmony export */   deserializeSuccess: () => (/* binding */ deserializeSuccess),\n/* harmony export */   isStatefulHostTimeouted: () => (/* binding */ isStatefulHostTimeouted),\n/* harmony export */   isStatefulHostUp: () => (/* binding */ isStatefulHostUp),\n/* harmony export */   serializeData: () => (/* binding */ serializeData),\n/* harmony export */   serializeHeaders: () => (/* binding */ serializeHeaders),\n/* harmony export */   serializeQueryParameters: () => (/* binding */ serializeQueryParameters),\n/* harmony export */   serializeUrl: () => (/* binding */ serializeUrl),\n/* harmony export */   stackFrameWithoutCredentials: () => (/* binding */ stackFrameWithoutCredentials),\n/* harmony export */   stackTraceWithoutCredentials: () => (/* binding */ stackTraceWithoutCredentials)\n/* harmony export */ });\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\n\nfunction createMappedRequestOptions(requestOptions, timeout) {\r\n    const options = requestOptions || {};\r\n    const data = options.data || {};\r\n    Object.keys(options).forEach(key => {\r\n        if (['timeout', 'headers', 'queryParameters', 'data', 'cacheable'].indexOf(key) === -1) {\r\n            data[key] = options[key]; // eslint-disable-line functional/immutable-data\r\n        }\r\n    });\r\n    return {\r\n        data: Object.entries(data).length > 0 ? data : undefined,\r\n        timeout: options.timeout || timeout,\r\n        headers: options.headers || {},\r\n        queryParameters: options.queryParameters || {},\r\n        cacheable: options.cacheable,\r\n    };\r\n}\n\nconst CallEnum = {\r\n    /**\r\n     * If the host is read only.\r\n     */\r\n    Read: 1,\r\n    /**\r\n     * If the host is write only.\r\n     */\r\n    Write: 2,\r\n    /**\r\n     * If the host is both read and write.\r\n     */\r\n    Any: 3,\r\n};\n\nconst HostStatusEnum = {\r\n    Up: 1,\r\n    Down: 2,\r\n    Timeouted: 3,\r\n};\n\n// By default, API Clients at Algolia have expiration delay\r\n// of 5 mins. In the JavaScript client, we have 2 mins.\r\nconst EXPIRATION_DELAY = 2 * 60 * 1000;\r\nfunction createStatefulHost(host, status = HostStatusEnum.Up) {\r\n    return {\r\n        ...host,\r\n        status,\r\n        lastUpdate: Date.now(),\r\n    };\r\n}\r\nfunction isStatefulHostUp(host) {\r\n    return host.status === HostStatusEnum.Up || Date.now() - host.lastUpdate > EXPIRATION_DELAY;\r\n}\r\nfunction isStatefulHostTimeouted(host) {\r\n    return (host.status === HostStatusEnum.Timeouted && Date.now() - host.lastUpdate <= EXPIRATION_DELAY);\r\n}\n\nfunction createStatelessHost(options) {\r\n    if (typeof options === 'string') {\r\n        return {\r\n            protocol: 'https',\r\n            url: options,\r\n            accept: CallEnum.Any,\r\n        };\r\n    }\r\n    return {\r\n        protocol: options.protocol || 'https',\r\n        url: options.url,\r\n        accept: options.accept || CallEnum.Any,\r\n    };\r\n}\n\nfunction createRetryableOptions(hostsCache, statelessHosts) {\r\n    return Promise.all(statelessHosts.map(statelessHost => {\r\n        return hostsCache.get(statelessHost, () => {\r\n            return Promise.resolve(createStatefulHost(statelessHost));\r\n        });\r\n    })).then(statefulHosts => {\r\n        const hostsUp = statefulHosts.filter(host => isStatefulHostUp(host));\r\n        const hostsTimeouted = statefulHosts.filter(host => isStatefulHostTimeouted(host));\r\n        /**\r\n         * Note, we put the hosts that previously timeouted on the end of the list.\r\n         */\r\n        const hostsAvailable = [...hostsUp, ...hostsTimeouted];\r\n        const statelessHostsAvailable = hostsAvailable.length > 0\r\n            ? hostsAvailable.map(host => createStatelessHost(host))\r\n            : statelessHosts;\r\n        return {\r\n            getTimeout(timeoutsCount, baseTimeout) {\r\n                /**\r\n                 * Imagine that you have 4 hosts, if timeouts will increase\r\n                 * on the following way: 1 (timeouted) > 4 (timeouted) > 5 (200)\r\n                 *\r\n                 * Note that, the very next request, we start from the previous timeout\r\n                 *\r\n                 *  5 (timeouted) > 6 (timeouted) > 7 ...\r\n                 *\r\n                 * This strategy may need to be reviewed, but is the strategy on the our\r\n                 * current v3 version.\r\n                 */\r\n                const timeoutMultiplier = hostsTimeouted.length === 0 && timeoutsCount === 0\r\n                    ? 1\r\n                    : hostsTimeouted.length + 3 + timeoutsCount;\r\n                return timeoutMultiplier * baseTimeout;\r\n            },\r\n            statelessHosts: statelessHostsAvailable,\r\n        };\r\n    });\r\n}\n\nconst isNetworkError = ({ isTimedOut, status }) => {\r\n    return !isTimedOut && ~~status === 0;\r\n};\r\nconst isRetryable = (response) => {\r\n    const status = response.status;\r\n    const isTimedOut = response.isTimedOut;\r\n    return (isTimedOut || isNetworkError(response) || (~~(status / 100) !== 2 && ~~(status / 100) !== 4));\r\n};\r\nconst isSuccess = ({ status }) => {\r\n    return ~~(status / 100) === 2;\r\n};\r\nconst retryDecision = (response, outcomes) => {\r\n    if (isRetryable(response)) {\r\n        return outcomes.onRetry(response);\r\n    }\r\n    if (isSuccess(response)) {\r\n        return outcomes.onSuccess(response);\r\n    }\r\n    return outcomes.onFail(response);\r\n};\n\nfunction retryableRequest(transporter, statelessHosts, request, requestOptions) {\r\n    const stackTrace = []; // eslint-disable-line functional/prefer-readonly-type\r\n    /**\r\n     * First we prepare the payload that do not depend from hosts.\r\n     */\r\n    const data = serializeData(request, requestOptions);\r\n    const headers = serializeHeaders(transporter, requestOptions);\r\n    const method = request.method;\r\n    // On `GET`, the data is proxied to query parameters.\r\n    const dataQueryParameters = request.method !== _algolia_requester_common__WEBPACK_IMPORTED_MODULE_0__.MethodEnum.Get\r\n        ? {}\r\n        : {\r\n            ...request.data,\r\n            ...requestOptions.data,\r\n        };\r\n    const queryParameters = {\r\n        'x-algolia-agent': transporter.userAgent.value,\r\n        ...transporter.queryParameters,\r\n        ...dataQueryParameters,\r\n        ...requestOptions.queryParameters,\r\n    };\r\n    let timeoutsCount = 0; // eslint-disable-line functional/no-let\r\n    const retry = (hosts, // eslint-disable-line functional/prefer-readonly-type\r\n    getTimeout) => {\r\n        /**\r\n         * We iterate on each host, until there is no host left.\r\n         */\r\n        const host = hosts.pop(); // eslint-disable-line functional/immutable-data\r\n        if (host === undefined) {\r\n            throw createRetryError(stackTraceWithoutCredentials(stackTrace));\r\n        }\r\n        const payload = {\r\n            data,\r\n            headers,\r\n            method,\r\n            url: serializeUrl(host, request.path, queryParameters),\r\n            connectTimeout: getTimeout(timeoutsCount, transporter.timeouts.connect),\r\n            responseTimeout: getTimeout(timeoutsCount, requestOptions.timeout),\r\n        };\r\n        /**\r\n         * The stackFrame is pushed to the stackTrace so we\r\n         * can have information about onRetry and onFailure\r\n         * decisions.\r\n         */\r\n        const pushToStackTrace = (response) => {\r\n            const stackFrame = {\r\n                request: payload,\r\n                response,\r\n                host,\r\n                triesLeft: hosts.length,\r\n            };\r\n            // eslint-disable-next-line functional/immutable-data\r\n            stackTrace.push(stackFrame);\r\n            return stackFrame;\r\n        };\r\n        const decisions = {\r\n            onSuccess: response => deserializeSuccess(response),\r\n            onRetry(response) {\r\n                const stackFrame = pushToStackTrace(response);\r\n                /**\r\n                 * If response is a timeout, we increaset the number of\r\n                 * timeouts so we can increase the timeout later.\r\n                 */\r\n                if (response.isTimedOut) {\r\n                    timeoutsCount++;\r\n                }\r\n                return Promise.all([\r\n                    /**\r\n                     * Failures are individually send the logger, allowing\r\n                     * the end user to debug / store stack frames even\r\n                     * when a retry error does not happen.\r\n                     */\r\n                    transporter.logger.info('Retryable failure', stackFrameWithoutCredentials(stackFrame)),\r\n                    /**\r\n                     * We also store the state of the host in failure cases. If the host, is\r\n                     * down it will remain down for the next 2 minutes. In a timeout situation,\r\n                     * this host will be added end of the list of hosts on the next request.\r\n                     */\r\n                    transporter.hostsCache.set(host, createStatefulHost(host, response.isTimedOut ? HostStatusEnum.Timeouted : HostStatusEnum.Down)),\r\n                ]).then(() => retry(hosts, getTimeout));\r\n            },\r\n            onFail(response) {\r\n                pushToStackTrace(response);\r\n                throw deserializeFailure(response, stackTraceWithoutCredentials(stackTrace));\r\n            },\r\n        };\r\n        return transporter.requester.send(payload).then(response => {\r\n            return retryDecision(response, decisions);\r\n        });\r\n    };\r\n    /**\r\n     * Finally, for each retryable host perform request until we got a non\r\n     * retryable response. Some notes here:\r\n     *\r\n     * 1. The reverse here is applied so we can apply a `pop` later on => more performant.\r\n     * 2. We also get from the retryable options a timeout multiplier that is tailored\r\n     * for the current context.\r\n     */\r\n    return createRetryableOptions(transporter.hostsCache, statelessHosts).then(options => {\r\n        return retry([...options.statelessHosts].reverse(), options.getTimeout);\r\n    });\r\n}\n\nfunction createTransporter(options) {\r\n    const { hostsCache, logger, requester, requestsCache, responsesCache, timeouts, userAgent, hosts, queryParameters, headers, } = options;\r\n    const transporter = {\r\n        hostsCache,\r\n        logger,\r\n        requester,\r\n        requestsCache,\r\n        responsesCache,\r\n        timeouts,\r\n        userAgent,\r\n        headers,\r\n        queryParameters,\r\n        hosts: hosts.map(host => createStatelessHost(host)),\r\n        read(request, requestOptions) {\r\n            /**\r\n             * First, we compute the user request options. Now, keep in mind,\r\n             * that using request options the user is able to modified the intire\r\n             * payload of the request. Such as headers, query parameters, and others.\r\n             */\r\n            const mappedRequestOptions = createMappedRequestOptions(requestOptions, transporter.timeouts.read);\r\n            const createRetryableRequest = () => {\r\n                /**\r\n                 * Then, we prepare a function factory that contains the construction of\r\n                 * the retryable request. At this point, we may *not* perform the actual\r\n                 * request. But we want to have the function factory ready.\r\n                 */\r\n                return retryableRequest(transporter, transporter.hosts.filter(host => (host.accept & CallEnum.Read) !== 0), request, mappedRequestOptions);\r\n            };\r\n            /**\r\n             * Once we have the function factory ready, we need to determine of the\r\n             * request is \"cacheable\" - should be cached. Note that, once again,\r\n             * the user can force this option.\r\n             */\r\n            const cacheable = mappedRequestOptions.cacheable !== undefined\r\n                ? mappedRequestOptions.cacheable\r\n                : request.cacheable;\r\n            /**\r\n             * If is not \"cacheable\", we immediatly trigger the retryable request, no\r\n             * need to check cache implementations.\r\n             */\r\n            if (cacheable !== true) {\r\n                return createRetryableRequest();\r\n            }\r\n            /**\r\n             * If the request is \"cacheable\", we need to first compute the key to ask\r\n             * the cache implementations if this request is on progress or if the\r\n             * response already exists on the cache.\r\n             */\r\n            const key = {\r\n                request,\r\n                mappedRequestOptions,\r\n                transporter: {\r\n                    queryParameters: transporter.queryParameters,\r\n                    headers: transporter.headers,\r\n                },\r\n            };\r\n            /**\r\n             * With the computed key, we first ask the responses cache\r\n             * implemention if this request was been resolved before.\r\n             */\r\n            return transporter.responsesCache.get(key, () => {\r\n                /**\r\n                 * If the request has never resolved before, we actually ask if there\r\n                 * is a current request with the same key on progress.\r\n                 */\r\n                return transporter.requestsCache.get(key, () => {\r\n                    return (transporter.requestsCache\r\n                        /**\r\n                         * Finally, if there is no request in progress with the same key,\r\n                         * this `createRetryableRequest()` will actually trigger the\r\n                         * retryable request.\r\n                         */\r\n                        .set(key, createRetryableRequest())\r\n                        .then(response => Promise.all([transporter.requestsCache.delete(key), response]), err => Promise.all([transporter.requestsCache.delete(key), Promise.reject(err)]))\r\n                        .then(([_, response]) => response));\r\n                });\r\n            }, {\r\n                /**\r\n                 * Of course, once we get this response back from the server, we\r\n                 * tell response cache to actually store the received response\r\n                 * to be used later.\r\n                 */\r\n                miss: response => transporter.responsesCache.set(key, response),\r\n            });\r\n        },\r\n        write(request, requestOptions) {\r\n            /**\r\n             * On write requests, no cache mechanisms are applied, and we\r\n             * proxy the request immediately to the requester.\r\n             */\r\n            return retryableRequest(transporter, transporter.hosts.filter(host => (host.accept & CallEnum.Write) !== 0), request, createMappedRequestOptions(requestOptions, transporter.timeouts.write));\r\n        },\r\n    };\r\n    return transporter;\r\n}\n\nfunction createUserAgent(version) {\r\n    const userAgent = {\r\n        value: `Algolia for JavaScript (${version})`,\r\n        add(options) {\r\n            const addedUserAgent = `; ${options.segment}${options.version !== undefined ? ` (${options.version})` : ''}`;\r\n            if (userAgent.value.indexOf(addedUserAgent) === -1) {\r\n                // eslint-disable-next-line functional/immutable-data\r\n                userAgent.value = `${userAgent.value}${addedUserAgent}`;\r\n            }\r\n            return userAgent;\r\n        },\r\n    };\r\n    return userAgent;\r\n}\n\nfunction deserializeSuccess(response) {\r\n    // eslint-disable-next-line functional/no-try-statement\r\n    try {\r\n        return JSON.parse(response.content);\r\n    }\r\n    catch (e) {\r\n        throw createDeserializationError(e.message, response);\r\n    }\r\n}\r\nfunction deserializeFailure({ content, status }, stackFrame) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let message = content;\r\n    // eslint-disable-next-line functional/no-try-statement\r\n    try {\r\n        message = JSON.parse(content).message;\r\n    }\r\n    catch (e) {\r\n        // ..\r\n    }\r\n    return createApiError(message, status, stackFrame);\r\n}\n\n// eslint-disable-next-line functional/prefer-readonly-type\r\nfunction encode(format, ...args) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let i = 0;\r\n    return format.replace(/%s/g, () => encodeURIComponent(args[i++]));\r\n}\n\nfunction serializeUrl(host, path, queryParameters) {\r\n    const queryParametersAsString = serializeQueryParameters(queryParameters);\r\n    // eslint-disable-next-line functional/no-let\r\n    let url = `${host.protocol}://${host.url}/${path.charAt(0) === '/' ? path.substr(1) : path}`;\r\n    if (queryParametersAsString.length) {\r\n        url += `?${queryParametersAsString}`;\r\n    }\r\n    return url;\r\n}\r\nfunction serializeQueryParameters(parameters) {\r\n    const isObjectOrArray = (value) => Object.prototype.toString.call(value) === '[object Object]' ||\r\n        Object.prototype.toString.call(value) === '[object Array]';\r\n    return Object.keys(parameters)\r\n        .map(key => encode('%s=%s', key, isObjectOrArray(parameters[key]) ? JSON.stringify(parameters[key]) : parameters[key]))\r\n        .join('&');\r\n}\r\nfunction serializeData(request, requestOptions) {\r\n    if (request.method === _algolia_requester_common__WEBPACK_IMPORTED_MODULE_0__.MethodEnum.Get ||\r\n        (request.data === undefined && requestOptions.data === undefined)) {\r\n        return undefined;\r\n    }\r\n    const data = Array.isArray(request.data)\r\n        ? request.data\r\n        : { ...request.data, ...requestOptions.data };\r\n    return JSON.stringify(data);\r\n}\r\nfunction serializeHeaders(transporter, requestOptions) {\r\n    const headers = {\r\n        ...transporter.headers,\r\n        ...requestOptions.headers,\r\n    };\r\n    const serializedHeaders = {};\r\n    Object.keys(headers).forEach(header => {\r\n        const value = headers[header];\r\n        // @ts-ignore\r\n        // eslint-disable-next-line functional/immutable-data\r\n        serializedHeaders[header.toLowerCase()] = value;\r\n    });\r\n    return serializedHeaders;\r\n}\n\nfunction stackTraceWithoutCredentials(stackTrace) {\r\n    return stackTrace.map(stackFrame => stackFrameWithoutCredentials(stackFrame));\r\n}\r\nfunction stackFrameWithoutCredentials(stackFrame) {\r\n    const modifiedHeaders = stackFrame.request.headers['x-algolia-api-key']\r\n        ? { 'x-algolia-api-key': '*****' }\r\n        : {};\r\n    return {\r\n        ...stackFrame,\r\n        request: {\r\n            ...stackFrame.request,\r\n            headers: {\r\n                ...stackFrame.request.headers,\r\n                ...modifiedHeaders,\r\n            },\r\n        },\r\n    };\r\n}\n\nfunction createApiError(message, status, transporterStackTrace) {\r\n    return {\r\n        name: 'ApiError',\r\n        message,\r\n        status,\r\n        transporterStackTrace,\r\n    };\r\n}\n\nfunction createDeserializationError(message, response) {\r\n    return {\r\n        name: 'DeserializationError',\r\n        message,\r\n        response,\r\n    };\r\n}\n\nfunction createRetryError(transporterStackTrace) {\r\n    return {\r\n        name: 'RetryError',\r\n        message: 'Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .',\r\n        transporterStackTrace,\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvdHJhbnNwb3J0ZXIvZGlzdC90cmFuc3BvcnRlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVEOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsaUVBQVU7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLFlBQVksc0hBQXNIO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMENBQTBDLFFBQVE7QUFDbEQ7QUFDQSxzQ0FBc0MsRUFBRSxnQkFBZ0IsRUFBRSxxQ0FBcUMsZ0JBQWdCLFFBQVE7QUFDdkg7QUFDQTtBQUNBLHFDQUFxQyxnQkFBZ0IsRUFBRSxlQUFlO0FBQ3RFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWMsS0FBSyxTQUFTLEdBQUcsK0NBQStDO0FBQy9GO0FBQ0EsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlFQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGgtZXhwbG9yZXIvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvdHJhbnNwb3J0ZXIvZGlzdC90cmFuc3BvcnRlci5lc20uanM/YzBlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZXRob2RFbnVtIH0gZnJvbSAnQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbic7XG5cbmZ1bmN0aW9uIGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKHJlcXVlc3RPcHRpb25zLCB0aW1lb3V0KSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICBjb25zdCBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IHt9O1xyXG4gICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGlmIChbJ3RpbWVvdXQnLCAnaGVhZGVycycsICdxdWVyeVBhcmFtZXRlcnMnLCAnZGF0YScsICdjYWNoZWFibGUnXS5pbmRleE9mKGtleSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IG9wdGlvbnNba2V5XTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IE9iamVjdC5lbnRyaWVzKGRhdGEpLmxlbmd0aCA+IDAgPyBkYXRhIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCB8fCB0aW1lb3V0LFxyXG4gICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyB8fCB7fSxcclxuICAgICAgICBxdWVyeVBhcmFtZXRlcnM6IG9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzIHx8IHt9LFxyXG4gICAgICAgIGNhY2hlYWJsZTogb3B0aW9ucy5jYWNoZWFibGUsXHJcbiAgICB9O1xyXG59XG5cbmNvbnN0IENhbGxFbnVtID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgaG9zdCBpcyByZWFkIG9ubHkuXHJcbiAgICAgKi9cclxuICAgIFJlYWQ6IDEsXHJcbiAgICAvKipcclxuICAgICAqIElmIHRoZSBob3N0IGlzIHdyaXRlIG9ubHkuXHJcbiAgICAgKi9cclxuICAgIFdyaXRlOiAyLFxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgaG9zdCBpcyBib3RoIHJlYWQgYW5kIHdyaXRlLlxyXG4gICAgICovXHJcbiAgICBBbnk6IDMsXHJcbn07XG5cbmNvbnN0IEhvc3RTdGF0dXNFbnVtID0ge1xyXG4gICAgVXA6IDEsXHJcbiAgICBEb3duOiAyLFxyXG4gICAgVGltZW91dGVkOiAzLFxyXG59O1xuXG4vLyBCeSBkZWZhdWx0LCBBUEkgQ2xpZW50cyBhdCBBbGdvbGlhIGhhdmUgZXhwaXJhdGlvbiBkZWxheVxyXG4vLyBvZiA1IG1pbnMuIEluIHRoZSBKYXZhU2NyaXB0IGNsaWVudCwgd2UgaGF2ZSAyIG1pbnMuXHJcbmNvbnN0IEVYUElSQVRJT05fREVMQVkgPSAyICogNjAgKiAxMDAwO1xyXG5mdW5jdGlvbiBjcmVhdGVTdGF0ZWZ1bEhvc3QoaG9zdCwgc3RhdHVzID0gSG9zdFN0YXR1c0VudW0uVXApIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uaG9zdCxcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgbGFzdFVwZGF0ZTogRGF0ZS5ub3coKSxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gaXNTdGF0ZWZ1bEhvc3RVcChob3N0KSB7XHJcbiAgICByZXR1cm4gaG9zdC5zdGF0dXMgPT09IEhvc3RTdGF0dXNFbnVtLlVwIHx8IERhdGUubm93KCkgLSBob3N0Lmxhc3RVcGRhdGUgPiBFWFBJUkFUSU9OX0RFTEFZO1xyXG59XHJcbmZ1bmN0aW9uIGlzU3RhdGVmdWxIb3N0VGltZW91dGVkKGhvc3QpIHtcclxuICAgIHJldHVybiAoaG9zdC5zdGF0dXMgPT09IEhvc3RTdGF0dXNFbnVtLlRpbWVvdXRlZCAmJiBEYXRlLm5vdygpIC0gaG9zdC5sYXN0VXBkYXRlIDw9IEVYUElSQVRJT05fREVMQVkpO1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRlbGVzc0hvc3Qob3B0aW9ucykge1xyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3RvY29sOiAnaHR0cHMnLFxyXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMsXHJcbiAgICAgICAgICAgIGFjY2VwdDogQ2FsbEVudW0uQW55LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHByb3RvY29sOiBvcHRpb25zLnByb3RvY29sIHx8ICdodHRwcycsXHJcbiAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgICBhY2NlcHQ6IG9wdGlvbnMuYWNjZXB0IHx8IENhbGxFbnVtLkFueSxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmV0cnlhYmxlT3B0aW9ucyhob3N0c0NhY2hlLCBzdGF0ZWxlc3NIb3N0cykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHN0YXRlbGVzc0hvc3RzLm1hcChzdGF0ZWxlc3NIb3N0ID0+IHtcclxuICAgICAgICByZXR1cm4gaG9zdHNDYWNoZS5nZXQoc3RhdGVsZXNzSG9zdCwgKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZVN0YXRlZnVsSG9zdChzdGF0ZWxlc3NIb3N0KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSkudGhlbihzdGF0ZWZ1bEhvc3RzID0+IHtcclxuICAgICAgICBjb25zdCBob3N0c1VwID0gc3RhdGVmdWxIb3N0cy5maWx0ZXIoaG9zdCA9PiBpc1N0YXRlZnVsSG9zdFVwKGhvc3QpKTtcclxuICAgICAgICBjb25zdCBob3N0c1RpbWVvdXRlZCA9IHN0YXRlZnVsSG9zdHMuZmlsdGVyKGhvc3QgPT4gaXNTdGF0ZWZ1bEhvc3RUaW1lb3V0ZWQoaG9zdCkpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE5vdGUsIHdlIHB1dCB0aGUgaG9zdHMgdGhhdCBwcmV2aW91c2x5IHRpbWVvdXRlZCBvbiB0aGUgZW5kIG9mIHRoZSBsaXN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGhvc3RzQXZhaWxhYmxlID0gWy4uLmhvc3RzVXAsIC4uLmhvc3RzVGltZW91dGVkXTtcclxuICAgICAgICBjb25zdCBzdGF0ZWxlc3NIb3N0c0F2YWlsYWJsZSA9IGhvc3RzQXZhaWxhYmxlLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgPyBob3N0c0F2YWlsYWJsZS5tYXAoaG9zdCA9PiBjcmVhdGVTdGF0ZWxlc3NIb3N0KGhvc3QpKVxyXG4gICAgICAgICAgICA6IHN0YXRlbGVzc0hvc3RzO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldFRpbWVvdXQodGltZW91dHNDb3VudCwgYmFzZVRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogSW1hZ2luZSB0aGF0IHlvdSBoYXZlIDQgaG9zdHMsIGlmIHRpbWVvdXRzIHdpbGwgaW5jcmVhc2VcclxuICAgICAgICAgICAgICAgICAqIG9uIHRoZSBmb2xsb3dpbmcgd2F5OiAxICh0aW1lb3V0ZWQpID4gNCAodGltZW91dGVkKSA+IDUgKDIwMClcclxuICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgKiBOb3RlIHRoYXQsIHRoZSB2ZXJ5IG5leHQgcmVxdWVzdCwgd2Ugc3RhcnQgZnJvbSB0aGUgcHJldmlvdXMgdGltZW91dFxyXG4gICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAqICA1ICh0aW1lb3V0ZWQpID4gNiAodGltZW91dGVkKSA+IDcgLi4uXHJcbiAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICogVGhpcyBzdHJhdGVneSBtYXkgbmVlZCB0byBiZSByZXZpZXdlZCwgYnV0IGlzIHRoZSBzdHJhdGVneSBvbiB0aGUgb3VyXHJcbiAgICAgICAgICAgICAgICAgKiBjdXJyZW50IHYzIHZlcnNpb24uXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRNdWx0aXBsaWVyID0gaG9zdHNUaW1lb3V0ZWQubGVuZ3RoID09PSAwICYmIHRpbWVvdXRzQ291bnQgPT09IDBcclxuICAgICAgICAgICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgICAgICAgICA6IGhvc3RzVGltZW91dGVkLmxlbmd0aCArIDMgKyB0aW1lb3V0c0NvdW50O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVvdXRNdWx0aXBsaWVyICogYmFzZVRpbWVvdXQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0YXRlbGVzc0hvc3RzOiBzdGF0ZWxlc3NIb3N0c0F2YWlsYWJsZSxcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cblxuY29uc3QgaXNOZXR3b3JrRXJyb3IgPSAoeyBpc1RpbWVkT3V0LCBzdGF0dXMgfSkgPT4ge1xyXG4gICAgcmV0dXJuICFpc1RpbWVkT3V0ICYmIH5+c3RhdHVzID09PSAwO1xyXG59O1xyXG5jb25zdCBpc1JldHJ5YWJsZSA9IChyZXNwb25zZSkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xyXG4gICAgY29uc3QgaXNUaW1lZE91dCA9IHJlc3BvbnNlLmlzVGltZWRPdXQ7XHJcbiAgICByZXR1cm4gKGlzVGltZWRPdXQgfHwgaXNOZXR3b3JrRXJyb3IocmVzcG9uc2UpIHx8ICh+fihzdGF0dXMgLyAxMDApICE9PSAyICYmIH5+KHN0YXR1cyAvIDEwMCkgIT09IDQpKTtcclxufTtcclxuY29uc3QgaXNTdWNjZXNzID0gKHsgc3RhdHVzIH0pID0+IHtcclxuICAgIHJldHVybiB+fihzdGF0dXMgLyAxMDApID09PSAyO1xyXG59O1xyXG5jb25zdCByZXRyeURlY2lzaW9uID0gKHJlc3BvbnNlLCBvdXRjb21lcykgPT4ge1xyXG4gICAgaWYgKGlzUmV0cnlhYmxlKHJlc3BvbnNlKSkge1xyXG4gICAgICAgIHJldHVybiBvdXRjb21lcy5vblJldHJ5KHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIGlmIChpc1N1Y2Nlc3MocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIG91dGNvbWVzLm9uU3VjY2VzcyhyZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0Y29tZXMub25GYWlsKHJlc3BvbnNlKTtcclxufTtcblxuZnVuY3Rpb24gcmV0cnlhYmxlUmVxdWVzdCh0cmFuc3BvcnRlciwgc3RhdGVsZXNzSG9zdHMsIHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKSB7XHJcbiAgICBjb25zdCBzdGFja1RyYWNlID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJzdCB3ZSBwcmVwYXJlIHRoZSBwYXlsb2FkIHRoYXQgZG8gbm90IGRlcGVuZCBmcm9tIGhvc3RzLlxyXG4gICAgICovXHJcbiAgICBjb25zdCBkYXRhID0gc2VyaWFsaXplRGF0YShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gc2VyaWFsaXplSGVhZGVycyh0cmFuc3BvcnRlciwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7XHJcbiAgICAvLyBPbiBgR0VUYCwgdGhlIGRhdGEgaXMgcHJveGllZCB0byBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgY29uc3QgZGF0YVF1ZXJ5UGFyYW1ldGVycyA9IHJlcXVlc3QubWV0aG9kICE9PSBNZXRob2RFbnVtLkdldFxyXG4gICAgICAgID8ge31cclxuICAgICAgICA6IHtcclxuICAgICAgICAgICAgLi4ucmVxdWVzdC5kYXRhLFxyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucy5kYXRhLFxyXG4gICAgICAgIH07XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYWxnb2xpYS1hZ2VudCc6IHRyYW5zcG9ydGVyLnVzZXJBZ2VudC52YWx1ZSxcclxuICAgICAgICAuLi50cmFuc3BvcnRlci5xdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgLi4uZGF0YVF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMsXHJcbiAgICB9O1xyXG4gICAgbGV0IHRpbWVvdXRzQ291bnQgPSAwOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBjb25zdCByZXRyeSA9IChob3N0cywgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL3ByZWZlci1yZWFkb25seS10eXBlXHJcbiAgICBnZXRUaW1lb3V0KSA9PiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2UgaXRlcmF0ZSBvbiBlYWNoIGhvc3QsIHVudGlsIHRoZXJlIGlzIG5vIGhvc3QgbGVmdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBob3N0ID0gaG9zdHMucG9wKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIGlmIChob3N0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlUmV0cnlFcnJvcihzdGFja1RyYWNlV2l0aG91dENyZWRlbnRpYWxzKHN0YWNrVHJhY2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgICAgICB1cmw6IHNlcmlhbGl6ZVVybChob3N0LCByZXF1ZXN0LnBhdGgsIHF1ZXJ5UGFyYW1ldGVycyksXHJcbiAgICAgICAgICAgIGNvbm5lY3RUaW1lb3V0OiBnZXRUaW1lb3V0KHRpbWVvdXRzQ291bnQsIHRyYW5zcG9ydGVyLnRpbWVvdXRzLmNvbm5lY3QpLFxyXG4gICAgICAgICAgICByZXNwb25zZVRpbWVvdXQ6IGdldFRpbWVvdXQodGltZW91dHNDb3VudCwgcmVxdWVzdE9wdGlvbnMudGltZW91dCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc3RhY2tGcmFtZSBpcyBwdXNoZWQgdG8gdGhlIHN0YWNrVHJhY2Ugc28gd2VcclxuICAgICAgICAgKiBjYW4gaGF2ZSBpbmZvcm1hdGlvbiBhYm91dCBvblJldHJ5IGFuZCBvbkZhaWx1cmVcclxuICAgICAgICAgKiBkZWNpc2lvbnMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgcHVzaFRvU3RhY2tUcmFjZSA9IChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFja0ZyYW1lID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogcGF5bG9hZCxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgaG9zdCxcclxuICAgICAgICAgICAgICAgIHRyaWVzTGVmdDogaG9zdHMubGVuZ3RoLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICBzdGFja1RyYWNlLnB1c2goc3RhY2tGcmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGFja0ZyYW1lO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZGVjaXNpb25zID0ge1xyXG4gICAgICAgICAgICBvblN1Y2Nlc3M6IHJlc3BvbnNlID0+IGRlc2VyaWFsaXplU3VjY2VzcyhyZXNwb25zZSksXHJcbiAgICAgICAgICAgIG9uUmV0cnkocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrRnJhbWUgPSBwdXNoVG9TdGFja1RyYWNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogSWYgcmVzcG9uc2UgaXMgYSB0aW1lb3V0LCB3ZSBpbmNyZWFzZXQgdGhlIG51bWJlciBvZlxyXG4gICAgICAgICAgICAgICAgICogdGltZW91dHMgc28gd2UgY2FuIGluY3JlYXNlIHRoZSB0aW1lb3V0IGxhdGVyLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuaXNUaW1lZE91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRzQ291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICogRmFpbHVyZXMgYXJlIGluZGl2aWR1YWxseSBzZW5kIHRoZSBsb2dnZXIsIGFsbG93aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICogdGhlIGVuZCB1c2VyIHRvIGRlYnVnIC8gc3RvcmUgc3RhY2sgZnJhbWVzIGV2ZW5cclxuICAgICAgICAgICAgICAgICAgICAgKiB3aGVuIGEgcmV0cnkgZXJyb3IgZG9lcyBub3QgaGFwcGVuLlxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLmxvZ2dlci5pbmZvKCdSZXRyeWFibGUgZmFpbHVyZScsIHN0YWNrRnJhbWVXaXRob3V0Q3JlZGVudGlhbHMoc3RhY2tGcmFtZSkpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAqIFdlIGFsc28gc3RvcmUgdGhlIHN0YXRlIG9mIHRoZSBob3N0IGluIGZhaWx1cmUgY2FzZXMuIElmIHRoZSBob3N0LCBpc1xyXG4gICAgICAgICAgICAgICAgICAgICAqIGRvd24gaXQgd2lsbCByZW1haW4gZG93biBmb3IgdGhlIG5leHQgMiBtaW51dGVzLiBJbiBhIHRpbWVvdXQgc2l0dWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAqIHRoaXMgaG9zdCB3aWxsIGJlIGFkZGVkIGVuZCBvZiB0aGUgbGlzdCBvZiBob3N0cyBvbiB0aGUgbmV4dCByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLmhvc3RzQ2FjaGUuc2V0KGhvc3QsIGNyZWF0ZVN0YXRlZnVsSG9zdChob3N0LCByZXNwb25zZS5pc1RpbWVkT3V0ID8gSG9zdFN0YXR1c0VudW0uVGltZW91dGVkIDogSG9zdFN0YXR1c0VudW0uRG93bikpLFxyXG4gICAgICAgICAgICAgICAgXSkudGhlbigoKSA9PiByZXRyeShob3N0cywgZ2V0VGltZW91dCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkZhaWwocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHB1c2hUb1N0YWNrVHJhY2UocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZGVzZXJpYWxpemVGYWlsdXJlKHJlc3BvbnNlLCBzdGFja1RyYWNlV2l0aG91dENyZWRlbnRpYWxzKHN0YWNrVHJhY2UpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0cmFuc3BvcnRlci5yZXF1ZXN0ZXIuc2VuZChwYXlsb2FkKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHJ5RGVjaXNpb24ocmVzcG9uc2UsIGRlY2lzaW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5hbGx5LCBmb3IgZWFjaCByZXRyeWFibGUgaG9zdCBwZXJmb3JtIHJlcXVlc3QgdW50aWwgd2UgZ290IGEgbm9uXHJcbiAgICAgKiByZXRyeWFibGUgcmVzcG9uc2UuIFNvbWUgbm90ZXMgaGVyZTpcclxuICAgICAqXHJcbiAgICAgKiAxLiBUaGUgcmV2ZXJzZSBoZXJlIGlzIGFwcGxpZWQgc28gd2UgY2FuIGFwcGx5IGEgYHBvcGAgbGF0ZXIgb24gPT4gbW9yZSBwZXJmb3JtYW50LlxyXG4gICAgICogMi4gV2UgYWxzbyBnZXQgZnJvbSB0aGUgcmV0cnlhYmxlIG9wdGlvbnMgYSB0aW1lb3V0IG11bHRpcGxpZXIgdGhhdCBpcyB0YWlsb3JlZFxyXG4gICAgICogZm9yIHRoZSBjdXJyZW50IGNvbnRleHQuXHJcbiAgICAgKi9cclxuICAgIHJldHVybiBjcmVhdGVSZXRyeWFibGVPcHRpb25zKHRyYW5zcG9ydGVyLmhvc3RzQ2FjaGUsIHN0YXRlbGVzc0hvc3RzKS50aGVuKG9wdGlvbnMgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXRyeShbLi4ub3B0aW9ucy5zdGF0ZWxlc3NIb3N0c10ucmV2ZXJzZSgpLCBvcHRpb25zLmdldFRpbWVvdXQpO1xyXG4gICAgfSk7XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHJhbnNwb3J0ZXIob3B0aW9ucykge1xyXG4gICAgY29uc3QgeyBob3N0c0NhY2hlLCBsb2dnZXIsIHJlcXVlc3RlciwgcmVxdWVzdHNDYWNoZSwgcmVzcG9uc2VzQ2FjaGUsIHRpbWVvdXRzLCB1c2VyQWdlbnQsIGhvc3RzLCBxdWVyeVBhcmFtZXRlcnMsIGhlYWRlcnMsIH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSB7XHJcbiAgICAgICAgaG9zdHNDYWNoZSxcclxuICAgICAgICBsb2dnZXIsXHJcbiAgICAgICAgcmVxdWVzdGVyLFxyXG4gICAgICAgIHJlcXVlc3RzQ2FjaGUsXHJcbiAgICAgICAgcmVzcG9uc2VzQ2FjaGUsXHJcbiAgICAgICAgdGltZW91dHMsXHJcbiAgICAgICAgdXNlckFnZW50LFxyXG4gICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgIGhvc3RzOiBob3N0cy5tYXAoaG9zdCA9PiBjcmVhdGVTdGF0ZWxlc3NIb3N0KGhvc3QpKSxcclxuICAgICAgICByZWFkKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJzdCwgd2UgY29tcHV0ZSB0aGUgdXNlciByZXF1ZXN0IG9wdGlvbnMuIE5vdywga2VlcCBpbiBtaW5kLFxyXG4gICAgICAgICAgICAgKiB0aGF0IHVzaW5nIHJlcXVlc3Qgb3B0aW9ucyB0aGUgdXNlciBpcyBhYmxlIHRvIG1vZGlmaWVkIHRoZSBpbnRpcmVcclxuICAgICAgICAgICAgICogcGF5bG9hZCBvZiB0aGUgcmVxdWVzdC4gU3VjaCBhcyBoZWFkZXJzLCBxdWVyeSBwYXJhbWV0ZXJzLCBhbmQgb3RoZXJzLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0T3B0aW9ucywgdHJhbnNwb3J0ZXIudGltZW91dHMucmVhZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZVJldHJ5YWJsZVJlcXVlc3QgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIFRoZW4sIHdlIHByZXBhcmUgYSBmdW5jdGlvbiBmYWN0b3J5IHRoYXQgY29udGFpbnMgdGhlIGNvbnN0cnVjdGlvbiBvZlxyXG4gICAgICAgICAgICAgICAgICogdGhlIHJldHJ5YWJsZSByZXF1ZXN0LiBBdCB0aGlzIHBvaW50LCB3ZSBtYXkgKm5vdCogcGVyZm9ybSB0aGUgYWN0dWFsXHJcbiAgICAgICAgICAgICAgICAgKiByZXF1ZXN0LiBCdXQgd2Ugd2FudCB0byBoYXZlIHRoZSBmdW5jdGlvbiBmYWN0b3J5IHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0cnlhYmxlUmVxdWVzdCh0cmFuc3BvcnRlciwgdHJhbnNwb3J0ZXIuaG9zdHMuZmlsdGVyKGhvc3QgPT4gKGhvc3QuYWNjZXB0ICYgQ2FsbEVudW0uUmVhZCkgIT09IDApLCByZXF1ZXN0LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPbmNlIHdlIGhhdmUgdGhlIGZ1bmN0aW9uIGZhY3RvcnkgcmVhZHksIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIG9mIHRoZVxyXG4gICAgICAgICAgICAgKiByZXF1ZXN0IGlzIFwiY2FjaGVhYmxlXCIgLSBzaG91bGQgYmUgY2FjaGVkLiBOb3RlIHRoYXQsIG9uY2UgYWdhaW4sXHJcbiAgICAgICAgICAgICAqIHRoZSB1c2VyIGNhbiBmb3JjZSB0aGlzIG9wdGlvbi5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlYWJsZSA9IG1hcHBlZFJlcXVlc3RPcHRpb25zLmNhY2hlYWJsZSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IG1hcHBlZFJlcXVlc3RPcHRpb25zLmNhY2hlYWJsZVxyXG4gICAgICAgICAgICAgICAgOiByZXF1ZXN0LmNhY2hlYWJsZTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIElmIGlzIG5vdCBcImNhY2hlYWJsZVwiLCB3ZSBpbW1lZGlhdGx5IHRyaWdnZXIgdGhlIHJldHJ5YWJsZSByZXF1ZXN0LCBub1xyXG4gICAgICAgICAgICAgKiBuZWVkIHRvIGNoZWNrIGNhY2hlIGltcGxlbWVudGF0aW9ucy5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmIChjYWNoZWFibGUgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVSZXRyeWFibGVSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIElmIHRoZSByZXF1ZXN0IGlzIFwiY2FjaGVhYmxlXCIsIHdlIG5lZWQgdG8gZmlyc3QgY29tcHV0ZSB0aGUga2V5IHRvIGFza1xyXG4gICAgICAgICAgICAgKiB0aGUgY2FjaGUgaW1wbGVtZW50YXRpb25zIGlmIHRoaXMgcmVxdWVzdCBpcyBvbiBwcm9ncmVzcyBvciBpZiB0aGVcclxuICAgICAgICAgICAgICogcmVzcG9uc2UgYWxyZWFkeSBleGlzdHMgb24gdGhlIGNhY2hlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29uc3Qga2V5ID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdCxcclxuICAgICAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnM6IHRyYW5zcG9ydGVyLnF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0cmFuc3BvcnRlci5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFdpdGggdGhlIGNvbXB1dGVkIGtleSwgd2UgZmlyc3QgYXNrIHRoZSByZXNwb25zZXMgY2FjaGVcclxuICAgICAgICAgICAgICogaW1wbGVtZW50aW9uIGlmIHRoaXMgcmVxdWVzdCB3YXMgYmVlbiByZXNvbHZlZCBiZWZvcmUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhbnNwb3J0ZXIucmVzcG9uc2VzQ2FjaGUuZ2V0KGtleSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBJZiB0aGUgcmVxdWVzdCBoYXMgbmV2ZXIgcmVzb2x2ZWQgYmVmb3JlLCB3ZSBhY3R1YWxseSBhc2sgaWYgdGhlcmVcclxuICAgICAgICAgICAgICAgICAqIGlzIGEgY3VycmVudCByZXF1ZXN0IHdpdGggdGhlIHNhbWUga2V5IG9uIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwb3J0ZXIucmVxdWVzdHNDYWNoZS5nZXQoa2V5LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0cmFuc3BvcnRlci5yZXF1ZXN0c0NhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBGaW5hbGx5LCBpZiB0aGVyZSBpcyBubyByZXF1ZXN0IGluIHByb2dyZXNzIHdpdGggdGhlIHNhbWUga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGlzIGBjcmVhdGVSZXRyeWFibGVSZXF1ZXN0KClgIHdpbGwgYWN0dWFsbHkgdHJpZ2dlciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogcmV0cnlhYmxlIHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0KGtleSwgY3JlYXRlUmV0cnlhYmxlUmVxdWVzdCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiBQcm9taXNlLmFsbChbdHJhbnNwb3J0ZXIucmVxdWVzdHNDYWNoZS5kZWxldGUoa2V5KSwgcmVzcG9uc2VdKSwgZXJyID0+IFByb21pc2UuYWxsKFt0cmFuc3BvcnRlci5yZXF1ZXN0c0NhY2hlLmRlbGV0ZShrZXkpLCBQcm9taXNlLnJlamVjdChlcnIpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChbXywgcmVzcG9uc2VdKSA9PiByZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogT2YgY291cnNlLCBvbmNlIHdlIGdldCB0aGlzIHJlc3BvbnNlIGJhY2sgZnJvbSB0aGUgc2VydmVyLCB3ZVxyXG4gICAgICAgICAgICAgICAgICogdGVsbCByZXNwb25zZSBjYWNoZSB0byBhY3R1YWxseSBzdG9yZSB0aGUgcmVjZWl2ZWQgcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgICAqIHRvIGJlIHVzZWQgbGF0ZXIuXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIG1pc3M6IHJlc3BvbnNlID0+IHRyYW5zcG9ydGVyLnJlc3BvbnNlc0NhY2hlLnNldChrZXksIHJlc3BvbnNlKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0ZShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT24gd3JpdGUgcmVxdWVzdHMsIG5vIGNhY2hlIG1lY2hhbmlzbXMgYXJlIGFwcGxpZWQsIGFuZCB3ZVxyXG4gICAgICAgICAgICAgKiBwcm94eSB0aGUgcmVxdWVzdCBpbW1lZGlhdGVseSB0byB0aGUgcmVxdWVzdGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZVJlcXVlc3QodHJhbnNwb3J0ZXIsIHRyYW5zcG9ydGVyLmhvc3RzLmZpbHRlcihob3N0ID0+IChob3N0LmFjY2VwdCAmIENhbGxFbnVtLldyaXRlKSAhPT0gMCksIHJlcXVlc3QsIGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKHJlcXVlc3RPcHRpb25zLCB0cmFuc3BvcnRlci50aW1lb3V0cy53cml0ZSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHRyYW5zcG9ydGVyO1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVzZXJBZ2VudCh2ZXJzaW9uKSB7XHJcbiAgICBjb25zdCB1c2VyQWdlbnQgPSB7XHJcbiAgICAgICAgdmFsdWU6IGBBbGdvbGlhIGZvciBKYXZhU2NyaXB0ICgke3ZlcnNpb259KWAsXHJcbiAgICAgICAgYWRkKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgYWRkZWRVc2VyQWdlbnQgPSBgOyAke29wdGlvbnMuc2VnbWVudH0ke29wdGlvbnMudmVyc2lvbiAhPT0gdW5kZWZpbmVkID8gYCAoJHtvcHRpb25zLnZlcnNpb259KWAgOiAnJ31gO1xyXG4gICAgICAgICAgICBpZiAodXNlckFnZW50LnZhbHVlLmluZGV4T2YoYWRkZWRVc2VyQWdlbnQpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgICAgIHVzZXJBZ2VudC52YWx1ZSA9IGAke3VzZXJBZ2VudC52YWx1ZX0ke2FkZGVkVXNlckFnZW50fWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJBZ2VudDtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VyQWdlbnQ7XHJcbn1cblxuZnVuY3Rpb24gZGVzZXJpYWxpemVTdWNjZXNzKHJlc3BvbnNlKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby10cnktc3RhdGVtZW50XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlLmNvbnRlbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVEZXNlcmlhbGl6YXRpb25FcnJvcihlLm1lc3NhZ2UsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUZhaWx1cmUoeyBjb250ZW50LCBzdGF0dXMgfSwgc3RhY2tGcmFtZSkge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBsZXQgbWVzc2FnZSA9IGNvbnRlbnQ7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby10cnktc3RhdGVtZW50XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGNvbnRlbnQpLm1lc3NhZ2U7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIC4uXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlQXBpRXJyb3IobWVzc2FnZSwgc3RhdHVzLCBzdGFja0ZyYW1lKTtcclxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG5mdW5jdGlvbiBlbmNvZGUoZm9ybWF0LCAuLi5hcmdzKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgIGxldCBpID0gMDtcclxuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvJXMvZywgKCkgPT4gZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3NbaSsrXSkpO1xyXG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZVVybChob3N0LCBwYXRoLCBxdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyc0FzU3RyaW5nID0gc2VyaWFsaXplUXVlcnlQYXJhbWV0ZXJzKHF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgIGxldCB1cmwgPSBgJHtob3N0LnByb3RvY29sfTovLyR7aG9zdC51cmx9LyR7cGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aH1gO1xyXG4gICAgaWYgKHF1ZXJ5UGFyYW1ldGVyc0FzU3RyaW5nLmxlbmd0aCkge1xyXG4gICAgICAgIHVybCArPSBgPyR7cXVlcnlQYXJhbWV0ZXJzQXNTdHJpbmd9YDtcclxuICAgIH1cclxuICAgIHJldHVybiB1cmw7XHJcbn1cclxuZnVuY3Rpb24gc2VyaWFsaXplUXVlcnlQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpIHtcclxuICAgIGNvbnN0IGlzT2JqZWN0T3JBcnJheSA9ICh2YWx1ZSkgPT4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgfHxcclxuICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nO1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpXHJcbiAgICAgICAgLm1hcChrZXkgPT4gZW5jb2RlKCclcz0lcycsIGtleSwgaXNPYmplY3RPckFycmF5KHBhcmFtZXRlcnNba2V5XSkgPyBKU09OLnN0cmluZ2lmeShwYXJhbWV0ZXJzW2tleV0pIDogcGFyYW1ldGVyc1trZXldKSlcclxuICAgICAgICAuam9pbignJicpO1xyXG59XHJcbmZ1bmN0aW9uIHNlcmlhbGl6ZURhdGEocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpIHtcclxuICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gTWV0aG9kRW51bS5HZXQgfHxcclxuICAgICAgICAocmVxdWVzdC5kYXRhID09PSB1bmRlZmluZWQgJiYgcmVxdWVzdE9wdGlvbnMuZGF0YSA9PT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkYXRhID0gQXJyYXkuaXNBcnJheShyZXF1ZXN0LmRhdGEpXHJcbiAgICAgICAgPyByZXF1ZXN0LmRhdGFcclxuICAgICAgICA6IHsgLi4ucmVxdWVzdC5kYXRhLCAuLi5yZXF1ZXN0T3B0aW9ucy5kYXRhIH07XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cclxuZnVuY3Rpb24gc2VyaWFsaXplSGVhZGVycyh0cmFuc3BvcnRlciwgcmVxdWVzdE9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAgICAgLi4udHJhbnNwb3J0ZXIuaGVhZGVycyxcclxuICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNlcmlhbGl6ZWRIZWFkZXJzID0ge307XHJcbiAgICBPYmplY3Qua2V5cyhoZWFkZXJzKS5mb3JFYWNoKGhlYWRlciA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBoZWFkZXJzW2hlYWRlcl07XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgc2VyaWFsaXplZEhlYWRlcnNbaGVhZGVyLnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzZXJpYWxpemVkSGVhZGVycztcclxufVxuXG5mdW5jdGlvbiBzdGFja1RyYWNlV2l0aG91dENyZWRlbnRpYWxzKHN0YWNrVHJhY2UpIHtcclxuICAgIHJldHVybiBzdGFja1RyYWNlLm1hcChzdGFja0ZyYW1lID0+IHN0YWNrRnJhbWVXaXRob3V0Q3JlZGVudGlhbHMoc3RhY2tGcmFtZSkpO1xyXG59XHJcbmZ1bmN0aW9uIHN0YWNrRnJhbWVXaXRob3V0Q3JlZGVudGlhbHMoc3RhY2tGcmFtZSkge1xyXG4gICAgY29uc3QgbW9kaWZpZWRIZWFkZXJzID0gc3RhY2tGcmFtZS5yZXF1ZXN0LmhlYWRlcnNbJ3gtYWxnb2xpYS1hcGkta2V5J11cclxuICAgICAgICA/IHsgJ3gtYWxnb2xpYS1hcGkta2V5JzogJyoqKioqJyB9XHJcbiAgICAgICAgOiB7fTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uc3RhY2tGcmFtZSxcclxuICAgICAgICByZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgIC4uLnN0YWNrRnJhbWUucmVxdWVzdCxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgLi4uc3RhY2tGcmFtZS5yZXF1ZXN0LmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAuLi5tb2RpZmllZEhlYWRlcnMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXBpRXJyb3IobWVzc2FnZSwgc3RhdHVzLCB0cmFuc3BvcnRlclN0YWNrVHJhY2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogJ0FwaUVycm9yJyxcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIHN0YXR1cyxcclxuICAgICAgICB0cmFuc3BvcnRlclN0YWNrVHJhY2UsXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlc2VyaWFsaXphdGlvbkVycm9yKG1lc3NhZ2UsIHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdEZXNlcmlhbGl6YXRpb25FcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICByZXNwb25zZSxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmV0cnlFcnJvcih0cmFuc3BvcnRlclN0YWNrVHJhY2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogJ1JldHJ5RXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdVbnJlYWNoYWJsZSBob3N0cyAtIHlvdXIgYXBwbGljYXRpb24gaWQgbWF5IGJlIGluY29ycmVjdC4gSWYgdGhlIGVycm9yIHBlcnNpc3RzLCBwbGVhc2UgcmVhY2ggb3V0IHRvIHRoZSBBbGdvbGlhIFN1cHBvcnQgdGVhbTogaHR0cHM6Ly9hbGcubGkvc3VwcG9ydCAuJyxcclxuICAgICAgICB0cmFuc3BvcnRlclN0YWNrVHJhY2UsXHJcbiAgICB9O1xyXG59XG5cbmV4cG9ydCB7IENhbGxFbnVtLCBIb3N0U3RhdHVzRW51bSwgY3JlYXRlQXBpRXJyb3IsIGNyZWF0ZURlc2VyaWFsaXphdGlvbkVycm9yLCBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucywgY3JlYXRlUmV0cnlFcnJvciwgY3JlYXRlU3RhdGVmdWxIb3N0LCBjcmVhdGVTdGF0ZWxlc3NIb3N0LCBjcmVhdGVUcmFuc3BvcnRlciwgY3JlYXRlVXNlckFnZW50LCBkZXNlcmlhbGl6ZUZhaWx1cmUsIGRlc2VyaWFsaXplU3VjY2VzcywgaXNTdGF0ZWZ1bEhvc3RUaW1lb3V0ZWQsIGlzU3RhdGVmdWxIb3N0VXAsIHNlcmlhbGl6ZURhdGEsIHNlcmlhbGl6ZUhlYWRlcnMsIHNlcmlhbGl6ZVF1ZXJ5UGFyYW1ldGVycywgc2VyaWFsaXplVXJsLCBzdGFja0ZyYW1lV2l0aG91dENyZWRlbnRpYWxzLCBzdGFja1RyYWNlV2l0aG91dENyZWRlbnRpYWxzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\n");

/***/ })

};
;